import{_ as ht,a0 as kt,f as w,l as C,A as pt,c as r,b as t,m as y,d as bt,g as d,t as l,C as s,n as B,F as R,r as U,w as F,i as gt,v as wt,G as z,o as i}from"./index-rvQoOiZL.js";import{D as ft}from"./DeleteConfirmationModal-BAPWzURY.js";import{u as mt}from"./blog-Dy399Syj.js";const Ct={class:"lawyer-blogs-container"},yt={class:"header"},Bt={class:"header-actions"},_t={class:"blog-filters"},xt={class:"filter-tabs"},Mt={class:"content"},Dt={key:0,class:"loading"},Lt={key:1},Ht={key:0,class:"empty-state"},It={key:1,class:"blog-list"},Tt={class:"blog-main"},Pt={class:"title"},St={class:"meta"},At={class:"timestamp"},Et={class:"excerpt"},Nt={class:"actions"},Vt=["onClick"],$t=["onClick"],jt=["onClick"],Rt=["onClick"],Ut={key:2,class:"pagination"},Ft=["disabled"],zt=["disabled"],qt={class:"modal-content editor-modal"},Gt={class:"modal-body"},Ot={class:"form-group"},Wt={class:"form-group"},Jt={class:"modal-content subscribers-modal"},Kt={class:"modal-body"},Qt={key:0,class:"empty-state"},Xt={key:1,class:"subs-list"},Yt={class:"avatar"},Zt={class:"info"},te={class:"name"},ee={class:"email"},oe={class:"modal-actions"},ne=["disabled"],se=["disabled"],le={__name:"LawyerBlogsView",setup(ie){const I=mt(),{blogs:p,pagination:c,isLoading:q,subscribers:T,subscriberPage:h}=kt(I),{loadMyBlogs:G,createBlog:P,updateBlog:S,deleteBlog:O,changeStatus:A,loadSubscribers:W}=I,b=w(null),f=w(!1),L=w(!1),m=w(null),g=w(null),u=w({title:"",content:""}),J=C(()=>{var o;return(((o=p.value)==null?void 0:o.length)||0)>0}),k=w(null),K=C(()=>p.value?b.value?p.value.filter(o=>o.status===b.value):p.value:[]),Q=C(()=>{var o;return((o=p.value)==null?void 0:o.length)||0}),X=C(()=>{var o;return((o=p.value)==null?void 0:o.filter(e=>e.status==="PUBLISHED").length)||0}),Y=C(()=>{var o;return((o=p.value)==null?void 0:o.filter(e=>e.status==="DRAFT").length)||0}),Z=C(()=>{var o;return((o=p.value)==null?void 0:o.filter(e=>e.status==="ARCHIVED").length)||0});pt(()=>{E(0),x(0)});function E(o){G(o,c.value.size,c.value.sortDirection)}function N(o){E(o)}function _(o){b.value=o}function x(o=0){W(o,h.value.size||10)}function tt(){m.value=null,u.value={title:"",content:""},f.value=!0,z(()=>{const o=document.querySelector(".modal-overlay");o==null||o.scrollIntoView({behavior:"smooth",block:"center"}),k.value&&(k.value.innerHTML="",k.value.focus())})}function et(o){m.value=o,u.value={title:o.title,content:o.content},f.value=!0,z(()=>{const e=document.querySelector(".modal-overlay");e==null||e.scrollIntoView({behavior:"smooth",block:"center"}),k.value&&(k.value.innerHTML=$(o.content||""),k.value.focus())})}function V(){f.value=!1}function H(){k.value&&(u.value.content=$(k.value.innerHTML))}function $(o){const e=document.createElement("div");e.innerHTML=o||"";const n=new Set(["B","STRONG","I","EM","U","P","H1","H2","UL","OL","LI","A","BR"]),v=M=>{const vt=Array.from(M.childNodes);for(const a of vt)if(a.nodeType===1){if(!n.has(a.tagName)){for(;a.firstChild;)M.insertBefore(a.firstChild,a);M.removeChild(a);continue}for(const D of Array.from(a.attributes))a.tagName==="A"&&(D.name==="href"||D.name==="target"||D.name==="rel")||a.removeAttribute(D.name);a.tagName==="A"&&(a.setAttribute("target","_blank"),a.setAttribute("rel","noopener noreferrer")),v(a)}else a.nodeType===8&&M.removeChild(a)};return v(e),e.innerHTML}function ot(){L.value=!0,x(0)}function j(){L.value=!1}async function nt(){H(),m.value?await S(m.value.blogId,{title:u.value.title,content:u.value.content,status:"DRAFT"}):await P({title:u.value.title,content:u.value.content,status:"DRAFT"}),f.value=!1}async function st(){H(),m.value?await S(m.value.blogId,{title:u.value.title,content:u.value.content,status:"PUBLISHED"}):await P({title:u.value.title,content:u.value.content,status:"PUBLISHED"}),f.value=!1}async function lt(o){await A(o.blogId,"PUBLISHED")}async function it(o){await A(o.blogId,"ARCHIVED")}function rt(o){g.value=o}async function at(){g.value&&(await O(g.value.blogId),g.value=null)}function ut(o){try{return new Date(o).toLocaleString()}catch{return o}}function dt(o,e){const n=document.createElement("div");n.innerHTML=o||"";const v=n.textContent||n.innerText||"";return v.length<=e?v:v.slice(0,e)+"â€¦"}function ct(o,e){return`${(o||"")[0]||""}${(e||"")[0]||""}`.toUpperCase()}return(o,e)=>(i(),r("div",Ct,[t("div",yt,[e[12]||(e[12]=t("div",{class:"header-left"},[t("h1",null,"My Blogs"),t("p",{class:"subtitle"},"Write, publish, and manage your blogs. View your subscribers.")],-1)),t("div",Bt,[t("button",{class:"btn btn-primary",onClick:tt},e[10]||(e[10]=[t("svg",{viewBox:"0 0 20 20",fill:"currentColor",width:"16",height:"16"},[t("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})],-1),d(" New Blog ")])),t("button",{class:"btn btn-outline",onClick:ot},[e[11]||(e[11]=t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2"})],-1)),d(" Subscribers ("+l(s(h).total||0)+") ",1)])])]),t("div",_t,[t("div",xt,[t("button",{onClick:e[0]||(e[0]=n=>_(null)),class:B(["filter-tab",{active:b.value===null}])}," All Blogs ("+l(Q.value)+") ",3),t("button",{onClick:e[1]||(e[1]=n=>_("PUBLISHED")),class:B(["filter-tab",{active:b.value==="PUBLISHED"}])}," Published ("+l(X.value)+") ",3),t("button",{onClick:e[2]||(e[2]=n=>_("DRAFT")),class:B(["filter-tab",{active:b.value==="DRAFT"}])}," Drafts ("+l(Y.value)+") ",3),t("button",{onClick:e[3]||(e[3]=n=>_("ARCHIVED")),class:B(["filter-tab",{active:b.value==="ARCHIVED"}])}," Archived ("+l(Z.value)+") ",3)])]),t("div",Mt,[s(q)?(i(),r("div",Dt,"Loading...")):(i(),r("div",Lt,[J.value?(i(),r("div",It,[(i(!0),r(R,null,U(K.value,n=>(i(),r("div",{key:n.blogId,class:"blog-card"},[t("div",Tt,[t("h3",Pt,l(n.title),1),t("div",St,[t("span",{class:B(["status",n.status.toLowerCase()])},l(n.status),3),t("span",At,"Updated: "+l(ut(n.updatedAt)),1)]),t("p",Et,l(dt(n.content,220)),1)]),t("div",Nt,[t("button",{class:"btn btn-outline btn-sm",onClick:v=>et(n)},e[14]||(e[14]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),d(" Edit ")]),8,Vt),n.status!=="ARCHIVED"?(i(),r("button",{key:0,class:"btn btn-outline btn-sm",onClick:v=>it(n)},e[15]||(e[15]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M3 7h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M5 7v11a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("rect",{x:"3",y:"3",width:"18",height:"4",rx:"1",ry:"1",stroke:"currentColor","stroke-width":"2"})],-1),d(" Archive ")]),8,$t)):y("",!0),t("button",{class:"btn btn-sm btn-danger",onClick:v=>rt(n)},e[16]||(e[16]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("polyline",{points:"3 6 5 6 21 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),d(" Delete ")]),8,jt),e[18]||(e[18]=t("div",{class:"divider"},null,-1)),n.status!=="PUBLISHED"?(i(),r("button",{key:1,class:"btn btn-primary btn-sm",onClick:v=>lt(n)},e[17]||(e[17]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M5 12h14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M13 5l7 7-7 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),d(" Publish ")]),8,Rt)):y("",!0)])]))),128))])):(i(),r("div",Ht,e[13]||(e[13]=[t("p",null,'No blogs yet. Click "New Blog" to create your first post.',-1)]))),s(c).totalPages>1&&b.value===null?(i(),r("div",Ut,[t("button",{class:"btn btn-outline",disabled:s(c).page===0,onClick:e[4]||(e[4]=n=>N(s(c).page-1))},e[19]||(e[19]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),d(" Prev ")]),8,Ft),t("span",null,"Page "+l(s(c).page+1)+" / "+l(s(c).totalPages),1),t("button",{class:"btn btn-outline",disabled:s(c).page>=s(c).totalPages-1,onClick:e[5]||(e[5]=n=>N(s(c).page+1))},e[20]||(e[20]=[d(" Next "),t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M9 18l6-6-6-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,zt)])):y("",!0)]))]),f.value?(i(),r("div",{key:0,class:"modal-overlay",onClick:F(V,["self"])},[t("div",qt,[t("div",Gt,[t("div",Ot,[e[21]||(e[21]=t("label",null,"Title",-1)),gt(t("input",{"onUpdate:modelValue":e[6]||(e[6]=n=>u.value.title=n),class:"title-input",placeholder:"Enter a compelling blog title"},null,512),[[wt,u.value.title]])]),t("div",Wt,[e[22]||(e[22]=t("label",null,"Content",-1)),t("div",{ref_key:"editor",ref:k,class:"rich-editor",contenteditable:"true",onInput:H},null,544)])]),t("div",{class:"modal-actions"},[t("button",{class:"btn btn-outline",onClick:V},e[23]||(e[23]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M18 6L6 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M6 6L18 18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})],-1),d(" Cancel ")])),t("button",{class:"btn btn-outline",onClick:nt},e[24]||(e[24]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M19 21H5a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h9l5 5v9a2 2 0 0 1-2 2z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M17 21v-8H7v8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M7 3v5h8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),d(" Save as Draft ")])),t("button",{class:"btn btn-primary",onClick:st},e[25]||(e[25]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[t("path",{d:"M5 12h14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"}),t("path",{d:"M13 5l7 7-7 7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),d(" Publish ")]))])])])):y("",!0),L.value?(i(),r("div",{key:1,class:"modal-overlay",onClick:F(j,["self"])},[t("div",Jt,[t("div",{class:"modal-header soft"},[t("button",{class:"modal-close",onClick:j},"Ã—")]),t("div",Kt,[s(T).length===0?(i(),r("div",Qt,e[26]||(e[26]=[t("p",null,"No subscribers yet.",-1)]))):(i(),r("div",Xt,[(i(!0),r(R,null,U(s(T),n=>(i(),r("div",{key:n.email,class:"sub-item"},[t("div",Yt,l(ct(n.firstName,n.lastName)),1),t("div",Zt,[t("div",te,l(n.firstName)+" "+l(n.lastName),1),t("div",ee,l(n.email),1)])]))),128))]))]),t("div",oe,[t("button",{class:"btn btn-outline",disabled:s(h).page===0,onClick:e[7]||(e[7]=n=>x(s(h).page-1))},"Prev",8,ne),t("span",null,"Page "+l(s(h).page+1)+" / "+l(s(h).totalPages||1),1),t("button",{class:"btn btn-outline",disabled:s(h).page>=(s(h).totalPages||1)-1,onClick:e[8]||(e[8]=n=>x(s(h).page+1))},"Next",8,se)])])])):y("",!0),g.value?(i(),bt(ft,{key:2,eventTitle:g.value.title,onConfirm:at,onCancel:e[9]||(e[9]=n=>g.value=null)},null,8,["eventTitle"])):y("",!0)]))}},de=ht(le,[["__scopeId","data-v-b8d5817a"]]);export{de as default};
