import{_ as oe,f as w,k as Z,l as H,D as ee,A as ie,c as d,b as e,w as J,m as f,t as m,i as L,v as A,n as C,g as q,$ as Y,o as l,u as re,d as ne,a as se,F as ae,r as le}from"./index-rvQoOiZL.js";import{V as de}from"./VideoCallModal-DvJYjgtH.js";const ue={class:"form-group"},me={class:"client-info"},ce={class:"client-avatar"},ve={class:"client-details"},ge={class:"client-name"},we={class:"client-email"},pe={class:"form-row"},ke={class:"form-group"},he=["min"],ye={class:"form-group"},fe={class:"form-row"},De={class:"form-group"},be=["min"],Ce={class:"form-group"},Te={key:0,class:"error-message"},xe={key:1,class:"error-message"},Me={key:2,class:"time-conflict-warning"},Ee={class:"meeting-status-info"},$e={class:"status-item"},_e={class:"payment-status-container"},Se={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Ne={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Ie={key:2,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Pe={key:0,class:"payment-amount"},je={class:"status-item"},Ue={class:"status-value"},Le={class:"form-actions"},Ae=["disabled"],Ve={key:0,class:"loading-spinner"},Be={key:3,class:"edit-restriction-notice"},Fe={__name:"EditMeetingModal",props:{meeting:{type:Object,required:!0}},emits:["close","meeting-updated"],setup(T,{emit:R}){const b=T,$=R,u=w(!1),c=Z({}),a=Z({meetingId:"",startDateTime:"",endDateTime:""}),x=w(""),M=w(""),y=w(""),D=w(""),N=H(()=>new Date().toISOString().split("T")[0]),_=H(()=>!a.startDateTime||!a.endDateTime?!1:new Date(a.startDateTime)>=new Date(a.endDateTime)),E=H(()=>{const r=new Date,n=new Date(b.meeting.startTimestamp);return r<n&&!b.meeting.isPaid});ee([x,M],([r,n])=>{r&&n&&(a.startDateTime=`${r}T${n}:00`)}),ee([y,D],([r,n])=>{r&&n&&(a.endDateTime=`${r}T${n}:00`)});const F=()=>{$("close")},z=r=>r&&(`${r.firstName||""} ${r.lastName||""}`.trim()||r.email)||"Unknown Client",O=r=>{if(!r)return"?";const n=r.firstName||"",S=r.lastName||"";return n&&S?`${n.charAt(0)}${S.charAt(0)}`:n?n.charAt(0):r.email?r.email.charAt(0).toUpperCase():"?"},h=()=>{const r=new Date,n=new Date(b.meeting.startTimestamp),S=new Date(b.meeting.endTimestamp);return r<n?"Upcoming":r>=n&&r<=S?"In Progress":"Ended"},o=r=>(r==null?void 0:r.toLowerCase())||"unknown",p=r=>{switch(r){case"COMPLETED":return"Paid";case"PENDING":return"Pending";case"FAILED":return"Failed";default:return"No Payment"}},k=()=>b.meeting.isPaid?"Cannot edit paid meetings":h()!=="Upcoming"?"Cannot edit meetings that have already started":"Meeting cannot be edited",I=()=>(Object.keys(c).forEach(r=>delete c[r]),a.startDateTime||(c.startDateTime="Start date and time are required"),a.endDateTime||(c.endDateTime="End date and time are required"),_.value&&(c.endDateTime="End time must be after start time"),a.startDateTime&&new Date(a.startDateTime)<=new Date&&(c.startDateTime="Meeting cannot be scheduled in the past"),Object.keys(c).length===0),P=async()=>{var r,n,S;if(!(!I()||!E.value)){u.value=!0;try{const j={meetingId:a.meetingId,startDateTime:new Date(a.startDateTime).toISOString(),endDateTime:new Date(a.endDateTime).toISOString()};await Y.updateMeeting(j),$("meeting-updated")}catch(j){if(console.error("Error updating meeting:",j),(S=(n=(r=j.response)==null?void 0:r.data)==null?void 0:n.error)!=null&&S.message){const V=j.response.data.error.message;V.includes("time")?c.startDateTime=V:alert(`Error: ${V}`)}else alert("An error occurred while updating the meeting. Please try again.")}finally{u.value=!1}}},G=()=>{a.meetingId=b.meeting.id;const r=new Date(b.meeting.startTimestamp),n=new Date(b.meeting.endTimestamp);x.value=r.toISOString().split("T")[0],M.value=r.toTimeString().slice(0,5),y.value=n.toISOString().split("T")[0],D.value=n.toTimeString().slice(0,5)};return ie(()=>{G()}),(r,n)=>{var S,j,V,W,K,Q,X;return l(),d("div",{class:"modal-overlay",onClick:F},[e("div",{class:"modal-content",onClick:n[4]||(n[4]=J(()=>{},["stop"]))},[e("div",{class:"modal-header"},[n[6]||(n[6]=e("h3",null,"Edit Meeting",-1)),e("button",{onClick:F,class:"modal-close"},n[5]||(n[5]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("form",{onSubmit:J(P,["prevent"]),class:"meeting-form"},[e("div",ue,[n[7]||(n[7]=e("label",null,"Client",-1)),e("div",me,[e("div",ce,[e("span",null,m(O(T.meeting.client)),1)]),e("div",ve,[e("p",ge,m(z(T.meeting.client)),1),e("p",we,m((S=T.meeting.client)==null?void 0:S.email),1)])])]),e("div",pe,[e("div",ke,[n[8]||(n[8]=e("label",{for:"startDate"},"Start Date *",-1)),L(e("input",{id:"startDate","onUpdate:modelValue":n[0]||(n[0]=s=>x.value=s),type:"date",class:C(["form-input",{error:c.startDateTime}]),min:N.value,required:""},null,10,he),[[A,x.value]])]),e("div",ye,[n[9]||(n[9]=e("label",{for:"startTime"},"Start Time *",-1)),L(e("input",{id:"startTime","onUpdate:modelValue":n[1]||(n[1]=s=>M.value=s),type:"time",class:C(["form-input",{error:c.startDateTime}]),required:""},null,2),[[A,M.value]])])]),e("div",fe,[e("div",De,[n[10]||(n[10]=e("label",{for:"endDate"},"End Date *",-1)),L(e("input",{id:"endDate","onUpdate:modelValue":n[2]||(n[2]=s=>y.value=s),type:"date",class:C(["form-input",{error:c.endDateTime}]),min:N.value,required:""},null,10,be),[[A,y.value]])]),e("div",Ce,[n[11]||(n[11]=e("label",{for:"endTime"},"End Time *",-1)),L(e("input",{id:"endTime","onUpdate:modelValue":n[3]||(n[3]=s=>D.value=s),type:"time",class:C(["form-input",{error:c.endDateTime}]),required:""},null,2),[[A,D.value]])])]),c.startDateTime?(l(),d("div",Te,m(c.startDateTime),1)):f("",!0),c.endDateTime?(l(),d("div",xe,m(c.endDateTime),1)):f("",!0),_.value?(l(),d("div",Me,n[12]||(n[12]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"End time must be after start time",-1)]))):f("",!0),e("div",Ee,[e("div",$e,[n[16]||(n[16]=e("span",{class:"status-label"},"Payment Status:",-1)),e("div",_e,[e("div",{class:C(["payment-icon",o((j=T.meeting.payment)==null?void 0:j.status)])},[((V=T.meeting.payment)==null?void 0:V.status)==="COMPLETED"?(l(),d("svg",Se,n[13]||(n[13]=[e("path",{d:"M22 11.08V12A10 10 0 1 1 5.68 3.57",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M22 4L12 14.01L9 11.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):((W=T.meeting.payment)==null?void 0:W.status)==="PENDING"?(l(),d("svg",Ne,n[14]||(n[14]=[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),e("polyline",{points:"12,6 12,12 16,14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(l(),d("svg",Ie,n[15]||(n[15]=[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),e("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2"},null,-1),e("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2"},null,-1)])))],2),e("span",{class:C(["payment-status-text",o((K=T.meeting.payment)==null?void 0:K.status)])},m(p((Q=T.meeting.payment)==null?void 0:Q.status)),3),(X=T.meeting.payment)!=null&&X.amount?(l(),d("span",Pe,"৳"+m(T.meeting.payment.amount),1)):f("",!0)])]),e("div",je,[n[17]||(n[17]=e("span",{class:"status-label"},"Meeting Status:",-1)),e("span",Ue,m(h()),1)])]),e("div",Le,[e("button",{type:"button",onClick:F,class:"btn btn-outline"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:u.value||_.value||!E.value},[u.value?(l(),d("span",Ve)):f("",!0),q(" "+m(u.value?"Updating...":"Update Meeting"),1)],8,Ae)]),E.value?f("",!0):(l(),d("div",Be,[n[18]||(n[18]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("span",null,m(k()),1)]))],32)])])}}},Oe=oe(Fe,[["__scopeId","data-v-80630ed5"]]),qe={class:"form-group"},Re={key:0,class:"error-message"},ze={class:"form-group"},Ge={key:0,class:"error-message"},He={class:"form-row"},Ye={class:"form-group"},Je=["min"],We={class:"form-group"},Ke={class:"form-row"},Qe={class:"form-group"},Xe=["min"],Ze={class:"form-group"},et={key:0,class:"time-conflict-warning"},tt={key:1,class:"error-alert"},nt={class:"form-actions"},st=["disabled"],ot={key:0,class:"loading-spinner"},it={__name:"ScheduleMeetingModal",emits:["close","meeting-scheduled"],setup(T,{emit:R}){const b=R,$=w(!1),u=Z({}),c=w(""),a=Z({email:"",title:"",startDateTime:"",endDateTime:""}),x=w(""),M=w(""),y=w(""),D=w(""),N=H(()=>new Date().toISOString().split("T")[0]),_=H(()=>!a.startDateTime||!a.endDateTime?!1:new Date(a.startDateTime)>=new Date(a.endDateTime));ee([x,M],([h,o])=>{h&&o&&(a.startDateTime=`${h}T${o}:00`)}),ee([y,D],([h,o])=>{h&&o&&(a.endDateTime=`${h}T${o}:00`)});const E=()=>{b("close")},F=()=>(Object.keys(u).forEach(h=>delete u[h]),a.email||(u.email="Client email is required"),a.title||(u.title="Meeting title is required"),a.startDateTime||(u.startDateTime="Start date and time are required"),a.endDateTime||(u.endDateTime="End date and time are required"),_.value&&(u.endDateTime="End time must be after start time"),a.startDateTime&&new Date(a.startDateTime)<=new Date&&(u.startDateTime="Meeting cannot be scheduled in the past"),Object.keys(u).length===0),z=async()=>{var h,o,p;if(F()){$.value=!0,c.value="";try{const k={email:a.email,title:a.title,startDateTime:new Date(a.startDateTime).toISOString(),endDateTime:new Date(a.endDateTime).toISOString()};await Y.scheduleMeeting(k),b("meeting-scheduled")}catch(k){console.error("Error scheduling meeting:",k);const I=(h=k==null?void 0:k.response)==null?void 0:h.data,P=((o=I==null?void 0:I.error)==null?void 0:o.message)||(I==null?void 0:I.message)||(k==null?void 0:k.message)||"Failed to schedule meeting. Please try again.",G=(p=k==null?void 0:k.response)==null?void 0:p.status,r=P.toLowerCase();G===404&&r.includes("client")||r.includes("email")?u.email=P:r.includes("time")?u.startDateTime=P:c.value=P}finally{$.value=!1}}};return(()=>{const h=new Date,o=new Date(h);o.setDate(o.getDate()+1);const p=new Date(o);p.setHours(9,0,0,0);const k=new Date(o);k.setHours(10,0,0,0),x.value=p.toISOString().split("T")[0],M.value="09:00",y.value=k.toISOString().split("T")[0],D.value="10:00",a.title="Legal Consultation"})(),(h,o)=>(l(),d("div",{class:"modal-overlay",onClick:E},[e("div",{class:"modal-content",onClick:o[6]||(o[6]=J(()=>{},["stop"]))},[e("div",{class:"modal-header"},[o[8]||(o[8]=e("h3",null,"Schedule Meeting",-1)),e("button",{onClick:E,class:"modal-close"},o[7]||(o[7]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("form",{onSubmit:J(z,["prevent"]),class:"meeting-form"},[e("div",qe,[o[9]||(o[9]=e("label",{for:"clientEmail"},"Client Email *",-1)),L(e("input",{id:"clientEmail","onUpdate:modelValue":o[0]||(o[0]=p=>a.email=p),type:"email",class:C(["form-input",{error:u.email}]),placeholder:"Enter client's email address",required:""},null,2),[[A,a.email]]),u.email?(l(),d("span",Re,m(u.email),1)):f("",!0)]),e("div",ze,[o[10]||(o[10]=e("label",{for:"title"},"Meeting Title *",-1)),L(e("input",{id:"title","onUpdate:modelValue":o[1]||(o[1]=p=>a.title=p),type:"text",class:C(["form-input",{error:u.title}]),placeholder:"Enter meeting title",required:""},null,2),[[A,a.title]]),u.title?(l(),d("span",Ge,m(u.title),1)):f("",!0)]),e("div",He,[e("div",Ye,[o[11]||(o[11]=e("label",{for:"startDate"},"Start Date *",-1)),L(e("input",{id:"startDate","onUpdate:modelValue":o[2]||(o[2]=p=>x.value=p),type:"date",class:C(["form-input",{error:u.startDateTime}]),min:N.value,required:""},null,10,Je),[[A,x.value]])]),e("div",We,[o[12]||(o[12]=e("label",{for:"startTime"},"Start Time *",-1)),L(e("input",{id:"startTime","onUpdate:modelValue":o[3]||(o[3]=p=>M.value=p),type:"time",class:C(["form-input",{error:u.startDateTime}]),required:""},null,2),[[A,M.value]])])]),e("div",Ke,[e("div",Qe,[o[13]||(o[13]=e("label",{for:"endDate"},"End Date *",-1)),L(e("input",{id:"endDate","onUpdate:modelValue":o[4]||(o[4]=p=>y.value=p),type:"date",class:C(["form-input",{error:u.endDateTime}]),min:N.value,required:""},null,10,Xe),[[A,y.value]])]),e("div",Ze,[o[14]||(o[14]=e("label",{for:"endTime"},"End Time *",-1)),L(e("input",{id:"endTime","onUpdate:modelValue":o[5]||(o[5]=p=>D.value=p),type:"time",class:C(["form-input",{error:u.endDateTime}]),required:""},null,2),[[A,D.value]])])]),_.value?(l(),d("div",et,o[15]||(o[15]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"12",y1:"8",x2:"12",y2:"12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"12",y1:"16",x2:"12.01",y2:"16",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),e("span",null,"End time must be after start time",-1)]))):f("",!0),c.value?(l(),d("div",tt,[o[16]||(o[16]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2"})],-1)),e("span",null,m(c.value),1)])):f("",!0),e("div",nt,[e("button",{type:"button",onClick:E,class:"btn btn-outline"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:$.value||_.value},[$.value?(l(),d("span",ot)):f("",!0),q(" "+m($.value?"Scheduling...":"Schedule Meeting"),1)],8,st)])],32)])]))}},rt=oe(it,[["__scopeId","data-v-f2dbbc72"]]),at={class:"meetings-view"},lt={class:"meetings-header"},dt={class:"container"},ut={class:"header-content"},mt={class:"header-actions"},ct={class:"meetings-content"},vt={class:"container"},gt={key:0,class:"loading-state"},wt={key:1,class:"error-state"},pt={key:2,class:"meetings-list"},kt={key:0,class:"empty-state"},ht={key:1,class:"meetings-grid"},yt={class:"meeting-header"},ft={class:"meeting-header-left"},Dt={class:"meeting-time-badge"},bt={class:"meeting-actions"},Ct=["onClick"],Tt=["onClick"],xt={class:"meeting-info"},Mt={class:"meeting-title"},Et={class:"meeting-client"},$t={class:"client-avatar"},_t={class:"client-info"},St={class:"client-name"},Nt={class:"client-email"},It={class:"meeting-time"},Pt={class:"time-info"},jt={class:"duration-info"},Ut={key:0,class:"meeting-payment"},Lt={class:"payment-info"},At={class:"payment-status-container"},Vt={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Bt={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Ft={key:2,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},Ot={key:3,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},qt={class:"payment-amount"},Rt={class:"meeting-footer"},zt=["onClick"],Gt={key:1,class:"btn btn-outline btn-sm",disabled:""},Ht={key:2,class:"btn btn-outline btn-sm",disabled:""},Yt={class:"delete-content"},Jt={class:"delete-actions"},Wt=["disabled"],Kt={key:0,class:"loading-spinner"},Qt={__name:"MeetingsView",setup(T){const R=re(),b=w([]),$=w(!1),u=w(""),c=w(!1),a=w(!1),x=w(!1),M=w(!1),y=w(null),D=w(null),N=w(!1),_=w(""),E=async()=>{var s,t,g;$.value=!0,u.value="";try{const i=(await Y.getMeetings()).data||[];b.value=X(i)}catch(v){console.error("Error fetching meetings:",v),u.value=((g=(t=(s=v.response)==null?void 0:s.data)==null?void 0:t.error)==null?void 0:g.message)||"Failed to load meetings"}finally{$.value=!1}},F=s=>{y.value=s,a.value=!0},z=s=>{D.value=s,x.value=!0},O=()=>{x.value=!1,D.value=null},h=async()=>{var s,t,g;if(D.value){N.value=!0;try{await Y.deleteMeeting(D.value.id),O(),await E()}catch(v){console.error("Error deleting meeting:",v),(g=(t=(s=v.response)==null?void 0:s.data)==null?void 0:t.error)!=null&&g.message?alert(`Error: ${v.response.data.error.message}`):alert("An error occurred while deleting the meeting. Please try again.")}finally{N.value=!1}}},o=async()=>{c.value=!1,await E()},p=async()=>{a.value=!1,y.value=null,await E()},k=s=>s&&(`${s.firstName||""} ${s.lastName||""}`.trim()||s.email)||"Unknown Client",I=s=>{if(!s)return"?";const t=s.firstName||"",g=s.lastName||"";return t&&g?`${t.charAt(0)}${g.charAt(0)}`:t?t.charAt(0):s.email?s.email.charAt(0).toUpperCase():"?"},P=s=>s?new Date(s).toLocaleString("en-US",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"",G=s=>s?new Date(s).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"",r=(s,t)=>{if(!s||!t)return"";const g=new Date(s),i=new Date(t)-g,U=Math.floor(i/(1e3*60*60)),B=Math.floor(i%(1e3*60*60)/(1e3*60));return U===0?`${B} min`:B===0?`${U} hr`:`${U} hr ${B} min`},n=s=>{const t=new Date,g=new Date(s.startTimestamp),v=new Date(s.endTimestamp);return t<g?"Upcoming":t>=g&&t<=v?"In Progress":"Ended"},S=s=>n(s).toLowerCase().replace(" ","-"),j=s=>{var v,i;return n(s)!=="In Progress"?!1:((v=R.userInfo)==null?void 0:v.role)==="LAWYER"?!0:s.isPaid||((i=s.payment)==null?void 0:i.status)==="COMPLETED"},V=s=>{switch(s){case"PAID":case"COMPLETED":return"paid";case"PENDING":return"pending";case"FAILED":return"failed";case"RELEASED":return"released";case"REFUNDED":return"refunded";case"CANCELED":return"canceled";default:return"unknown"}},W=s=>{switch(s){case"PAID":case"COMPLETED":return"Paid";case"PENDING":return"Pending";case"FAILED":return"Failed";case"RELEASED":return"Released";case"REFUNDED":return"Refunded";case"CANCELED":return"Canceled";default:return"Unknown"}},K=async s=>{var t,g,v;try{const i=await Y.generateMeetingToken(s.id);y.value=s,_.value=i.data.roomName,M.value=!0}catch(i){console.error("Error generating meeting token:",i),(v=(g=(t=i.response)==null?void 0:t.data)==null?void 0:g.error)!=null&&v.message?alert(`Error: ${i.response.data.error.message}`):alert("Failed to join meeting. Please try again.")}},Q=()=>{M.value=!1,y.value=null,_.value=""},X=s=>s.sort((t,g)=>{const v=new Date(t.startTimestamp),i=new Date(g.startTimestamp),U=new Date,B=v>U,te=i>U;return B&&te?v-i:!B&&!te?i-v:te?1:-1});return ie(()=>{E()}),(s,t)=>{var g,v;return l(),d("div",at,[e("section",lt,[e("div",dt,[e("div",ut,[t[6]||(t[6]=e("div",{class:"header-info"},[e("h1",null,"Meeting Management"),e("p",null,"Schedule and manage your video consultations with clients")],-1)),e("div",mt,[e("button",{onClick:t[0]||(t[0]=i=>c.value=!0),class:"btn btn-primary"},t[5]||(t[5]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20"},[e("line",{x1:"12",y1:"5",x2:"12",y2:"19",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"5",y1:"12",x2:"19",y2:"12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),q(" Schedule Meeting ")]))])])])]),e("section",ct,[e("div",vt,[$.value?(l(),d("div",gt,t[7]||(t[7]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading meetings...",-1)]))):u.value?(l(),d("div",wt,[t[8]||(t[8]=se('<div class="error-icon" data-v-be5ba71a><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-be5ba71a><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-be5ba71a></circle><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" data-v-be5ba71a></line><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" data-v-be5ba71a></line></svg></div><h3 data-v-be5ba71a>Unable to load meetings</h3>',2)),e("p",null,m(u.value),1),e("button",{onClick:E,class:"btn btn-primary"}," Try Again ")])):(l(),d("div",pt,[b.value.length===0?(l(),d("div",kt,[t[9]||(t[9]=se('<div class="empty-icon" data-v-be5ba71a><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-be5ba71a><rect x="2" y="3" width="20" height="14" rx="2" ry="2" stroke="currentColor" stroke-width="2" data-v-be5ba71a></rect><line x1="8" y1="21" x2="16" y2="21" stroke="currentColor" stroke-width="2" data-v-be5ba71a></line><line x1="12" y1="17" x2="12" y2="21" stroke="currentColor" stroke-width="2" data-v-be5ba71a></line></svg></div><h3 data-v-be5ba71a>No meetings scheduled</h3><p data-v-be5ba71a> You haven&#39;t scheduled any meetings yet. Create your first meeting to get started. </p>',3)),e("button",{onClick:t[1]||(t[1]=i=>c.value=!0),class:"btn btn-primary"}," Schedule Your First Meeting ")])):(l(),d("div",ht,[(l(!0),d(ae,null,le(b.value,i=>{var U;return l(),d("div",{key:i.id,class:"meeting-card"},[e("div",yt,[e("div",ft,[e("div",{class:C(["meeting-status",S(i)])},m(n(i)),3),e("div",Dt,m(G(i.startTimestamp)),1)]),e("div",bt,[e("button",{onClick:B=>F(i),class:"btn-icon",title:"Edit meeting"},t[10]||(t[10]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,Ct),e("button",{onClick:B=>z(i),class:"btn-icon delete",title:"Delete meeting"},t[11]||(t[11]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("polyline",{points:"3,6 5,6 21,6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("path",{d:"M19,6v14a2,2,0,0,1-2,2H7a2,2,0,0,1-2-2V6m3,0V4a2,2,0,0,1,2-2h4a2,2,0,0,1,2,2V6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,Tt)])]),e("div",xt,[e("h3",Mt,m(i.roomName||"Video Consultation"),1),e("div",Et,[e("div",$t,[e("span",null,m(I(i.client)),1)]),e("div",_t,[e("p",St,m(k(i.client)),1),e("p",Nt,m((U=i.client)==null?void 0:U.email),1)])]),e("div",It,[e("div",Pt,[t[12]||(t[12]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),e("polyline",{points:"12,6 12,12 16,14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),e("span",null,m(P(i.startTimestamp)),1)]),e("div",jt,[e("span",null,"Duration: "+m(r(i.startTimestamp,i.endTimestamp)),1)])]),i.payment?(l(),d("div",Ut,[e("div",Lt,[e("div",At,[e("div",{class:C(["payment-icon",V(i.payment.status)])},[i.payment.status==="PAID"||i.payment.status==="COMPLETED"||i.payment.status==="RELEASED"?(l(),d("svg",Vt,t[13]||(t[13]=[e("path",{d:"M22 11.08V12A10 10 0 1 1 5.68 3.57",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M22 4L12 14.01L9 11.01",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):i.payment.status==="PENDING"?(l(),d("svg",Bt,t[14]||(t[14]=[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),e("polyline",{points:"12,6 12,12 16,14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):i.payment.status==="REFUNDED"?(l(),d("svg",Ft,t[15]||(t[15]=[e("path",{d:"M23 4v6h-6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1),e("path",{d:"M20.49 15a9 9 0 1 1-2.12-9.36L23 10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))):(l(),d("svg",Ot,t[16]||(t[16]=[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"},null,-1),e("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2"},null,-1),e("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2"},null,-1)])))],2),e("span",{class:C(["payment-status-text",V(i.payment.status)])},m(W(i.payment.status)),3),e("span",qt,"৳"+m(i.payment.amount),1)])])])):f("",!0)]),e("div",Rt,[j(i)?(l(),d("button",{key:0,onClick:B=>K(i),class:"btn btn-primary btn-sm"}," Join Meeting ",8,zt)):n(i)==="Upcoming"?(l(),d("button",Gt," Meeting Not Started ")):n(i)==="Ended"?(l(),d("button",Ht," Meeting Ended ")):f("",!0)])])}),128))]))]))])]),c.value?(l(),ne(rt,{key:0,onClose:t[2]||(t[2]=i=>c.value=!1),onMeetingScheduled:o})):f("",!0),a.value&&y.value?(l(),ne(Oe,{key:1,meeting:y.value,onClose:t[3]||(t[3]=i=>a.value=!1),onMeetingUpdated:p},null,8,["meeting"])):f("",!0),M.value&&y.value&&_.value?(l(),ne(de,{key:2,meeting:y.value,roomName:_.value,onClose:Q},null,8,["meeting","roomName"])):f("",!0),x.value?(l(),d("div",{key:3,class:"modal-overlay",onClick:O},[e("div",{class:"modal-content delete-modal",onClick:t[4]||(t[4]=J(()=>{},["stop"]))},[e("div",{class:"modal-header"},[t[18]||(t[18]=e("h3",null,"Delete Meeting",-1)),e("button",{onClick:O,class:"modal-close"},t[17]||(t[17]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))]),e("div",Yt,[t[22]||(t[22]=se('<div class="delete-icon" data-v-be5ba71a><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-be5ba71a><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-be5ba71a></circle><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" data-v-be5ba71a></line><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" data-v-be5ba71a></line></svg></div><h4 data-v-be5ba71a>Are you sure?</h4>',2)),e("p",null,[t[19]||(t[19]=q(" This will permanently delete the meeting with ")),e("strong",null,m(k((g=D.value)==null?void 0:g.client)),1),t[20]||(t[20]=q(" scheduled for ")),e("strong",null,m(P((v=D.value)==null?void 0:v.startTimestamp)),1),t[21]||(t[21]=q(". "))]),t[23]||(t[23]=e("p",null,"This action cannot be undone.",-1)),e("div",Jt,[e("button",{onClick:O,class:"btn btn-outline"}," Cancel "),e("button",{onClick:h,class:"btn btn-danger",disabled:N.value},[N.value?(l(),d("span",Kt)):f("",!0),q(" "+m(N.value?"Deleting...":"Delete Meeting"),1)],8,Wt)])])])])):f("",!0)])}}},en=oe(Qt,[["__scopeId","data-v-be5ba71a"]]);export{en as default};
