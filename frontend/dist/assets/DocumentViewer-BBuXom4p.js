import{_ as C,f as p,l as L,D as k,c as a,o as i,m as v,b as e,t as m,g as h,w as U}from"./index-rvQoOiZL.js";const B={class:"document-viewer"},j={class:"modal-header"},T={class:"modal-actions"},V={class:"document-content"},N={key:0,class:"document-loading"},R={key:1,class:"document-error"},A=["src","title"],O={key:3,class:"document-placeholder"},S={key:4,class:"document-placeholder"},E={__name:"DocumentViewer",props:{show:{type:Boolean,default:!1},title:{type:String,default:"Document Viewer"},documentUrl:{type:String,default:null},documentData:{type:[Blob,ArrayBuffer,Object],default:null},documentType:{type:String,default:"application/pdf"},fileName:{type:String,default:"document"},placeholderText:{type:String,default:"No document has been uploaded yet."},showLoadButton:{type:Boolean,default:!1},loadButtonText:{type:String,default:"Load Document"},autoLoad:{type:Boolean,default:!1}},emits:["close","load","download"],setup(l,{emit:f}){const t=l,w=f,s=p(!1),d=p(""),r=p(""),g=L(()=>s.value||t.autoLoad&&!t.documentData&&!r.value&&!d.value),y=()=>{w("close"),r.value&&(window.URL.revokeObjectURL(r.value),r.value=""),d.value="",s.value=!1},u=async()=>{s.value=!0,d.value="";try{if(t.documentData){if(t.documentData.error){d.value=t.documentData.error;return}const n=new Blob([t.documentData],{type:t.documentType});r.value=window.URL.createObjectURL(n)}else if(t.documentUrl)r.value=t.documentUrl;else{w("load");return}}catch(n){d.value="Unable to load document. Please try again.",console.error("Error loading document:",n)}finally{s.value=!1}},b=async()=>{try{let n=r.value;if(!n&&t.documentData){const o=new Blob([t.documentData],{type:t.documentType});n=window.URL.createObjectURL(o)}n?window.open(n,"_blank","noopener,noreferrer"):(console.error("No document URL available to open in new tab"),alert("Unable to open document in new tab. Please try again."))}catch(n){console.error("Error opening document in new tab:",n),alert("Unable to open document in new tab. Please try again.")}},x=async()=>{if(t.documentData)try{const n=new Blob([t.documentData],{type:t.documentType}),o=window.URL.createObjectURL(n),c=document.createElement("a");c.href=o,c.download=`${t.fileName}.${D(t.documentType)}`,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(o),document.body.removeChild(c)}catch(n){console.error("Error downloading document:",n),alert("Unable to download document. Please try again.")}else w("download")},D=n=>({"application/pdf":"pdf","image/jpeg":"jpg","image/png":"png","image/gif":"gif","text/plain":"txt","application/msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx"})[n]||"pdf";return k(()=>t.show,n=>{n&&t.autoLoad&&(!t.documentData&&!t.documentUrl&&(s.value=!0),u())}),k(()=>t.documentData,n=>{n&&t.show&&t.autoLoad&&u()}),k(()=>t.documentUrl,n=>{n&&t.show&&u()}),(n,o)=>(i(),a("div",B,[l.show?(i(),a("div",{key:0,class:"modal-overlay",onClick:y},[e("div",{class:"modal-content",onClick:o[0]||(o[0]=U(()=>{},["stop"]))},[e("div",j,[e("h3",null,m(l.title||"Document Viewer"),1),e("div",T,[r.value||l.documentData?(i(),a("button",{key:0,onClick:b,class:"btn btn-outline btn-sm"},o[1]||(o[1]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"15,3 21,3 21,9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"10",y1:"14",x2:"21",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),h(" Open in New Tab ")]))):v("",!0),r.value||l.documentData?(i(),a("button",{key:1,onClick:x,class:"btn btn-outline btn-sm"},o[2]||(o[2]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),h(" Download ")]))):v("",!0),e("button",{onClick:y,class:"close-btn"},o[3]||(o[3]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]),e("div",V,[g.value?(i(),a("div",N,o[4]||(o[4]=[e("div",{class:"loading-spinner"},null,-1),e("p",null,"Loading document...",-1)]))):d.value?(i(),a("div",R,[o[5]||(o[5]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"48",height:"48"},[e("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2"}),e("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2"})],-1)),o[6]||(o[6]=e("h4",null,"Unable to load document",-1)),e("p",null,m(d.value),1),e("button",{onClick:u,class:"btn btn-primary"},"Try Again")])):r.value?(i(),a("iframe",{key:2,src:r.value,class:"document-iframe",title:l.title||"Document"},null,8,A)):l.showLoadButton&&!l.autoLoad?(i(),a("div",O,[o[7]||(o[7]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},[e("path",{d:"M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),o[8]||(o[8]=e("h4",null,"Document not loaded",-1)),e("p",null,m(l.placeholderText||"Click the button below to load the document."),1),e("button",{onClick:u,class:"btn btn-primary"},m(l.loadButtonText||"Load Document"),1)])):(i(),a("div",S,[o[9]||(o[9]=e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64"},[e("path",{d:"M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),o[10]||(o[10]=e("h4",null,"No document available",-1)),e("p",null,m(l.placeholderText||"No document has been uploaded yet."),1)]))])])])):v("",!0)]))}},M=C(E,[["__scopeId","data-v-a566cd2a"]]);export{M as D};
