import{_ as X,f as d,A as Y,c as a,a as k,b as t,m as i,i as f,v as tt,j as P,t as l,F as et,r as st,w as at,g,z as ot,o,n as nt,R as lt}from"./index-rvQoOiZL.js";import{a as it}from"./aiChatService-B6U_Tdqr.js";const rt={class:"document-search-container"},dt={class:"main-layout"},ct={class:"search-content"},ut={class:"search-input-section"},vt={class:"search-input-wrapper"},ht={class:"input-container"},pt=["disabled"],mt=["disabled"],bt={key:0,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},kt={key:1,class:"loading-spinner",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gt={class:"search-options"},wt={class:"option-group"},ft={class:"option-group"},_t={class:"search-results-section"},yt={key:0,class:"loading-state"},Ct={key:1,class:"no-results-state"},xt={key:2,class:"results-container"},Bt={class:"results-header"},Mt={class:"results-count"},Vt={class:"results-list"},Dt={class:"result-header"},St={class:"result-title-section"},Lt={class:"result-title"},Ht={class:"result-meta"},At={key:0,class:"relevance-score"},jt={key:1,class:"document-volume"},It={class:"result-content"},Tt={class:"result-text"},Kt={key:0,class:"result-metadata"},Rt={key:0,class:"metadata-item"},zt={class:"metadata-value"},Ft={key:1,class:"metadata-item"},Et={class:"metadata-value"},Nt={key:2,class:"metadata-item"},Ut={class:"metadata-value"},Pt={class:"document-information"},$t={class:"document-info-header"},Zt=["onClick"],Ot={class:"document-info-content"},Qt={class:"info-grid"},qt={key:0,class:"info-item"},Gt={class:"info-value"},Jt={key:1,class:"info-item"},Wt={class:"info-value"},Xt={key:2,class:"info-item"},Yt={class:"info-value"},te={key:3,class:"info-item"},ee={class:"info-value"},se={key:4,class:"info-item"},ae={class:"info-value"},oe=["href"],ne={key:5,class:"info-item"},le={class:"info-value"},ie={key:6,class:"info-item"},re={class:"info-value"},de={key:7,class:"info-item"},ce={class:"info-value"},ue={key:8,class:"info-item"},ve={class:"info-value"},he={key:9,class:"info-item"},pe={class:"info-value"},me={key:10,class:"info-item"},be={class:"info-value"},ke={key:11,class:"info-item"},ge={class:"info-value"},we={key:12,class:"info-item"},fe={class:"info-value"},_e={class:"result-actions"},ye=["onClick"],Ce=["onClick"],xe={key:3,class:"default-state"},Be={key:0,class:"error-message"},Me={class:"error-content"},Ve={class:"modal-header"},De={class:"modal-body"},Se={key:0,class:"document-metadata"},Le={key:0,class:"metadata-row"},He={key:1,class:"metadata-row"},Ae={key:2,class:"metadata-row"},je={key:3,class:"metadata-row"},Ie={key:4,class:"metadata-row"},Te={class:"document-content"},Ke={class:"modal-footer"},Re={__name:"DocumentSearchView",setup(ze){const y=ot(),h=d(""),u=d([]),c=d(!1),C=d(!1),p=d(""),r=d(null),x=d(null),m=d(new Set),v=d({topK:10,threshold:.7}),B=async()=>{if(!(!h.value.trim()||c.value)){c.value=!0,p.value="",C.value=!0;try{const n=await it.searchDocuments(h.value.trim(),v.value.topK,v.value.threshold);u.value=n.results||[]}catch(n){console.error("Error searching documents:",n),p.value=n.message||"Failed to search documents. Please try again.",u.value=[]}finally{c.value=!1}}},$=n=>{n.key==="Enter"&&(n.preventDefault(),B())},M=async n=>{try{await navigator.clipboard.writeText(n)}catch(e){console.error("Failed to copy to clipboard:",e)}},Z=n=>{r.value=n},_=()=>{r.value=null},O=()=>{y.push("/ai-chat")},Q=()=>{y.push("/chat-history")},q=n=>{m.value.has(n)?m.value.delete(n):m.value.add(n)},G=n=>n?n.length<=50?n:n.substring(0,30)+"..."+n.substring(n.length-20):"",J=n=>{if(!n)return"";try{return new Date(n).toLocaleString()}catch{return n}},W=n=>{if(!n)return"";const e=["Bytes","KB","MB","GB"];if(n===0)return"0 Bytes";const b=Math.floor(Math.log(n)/Math.log(1024));return Math.round(n/Math.pow(1024,b)*100)/100+" "+e[b]};return Y(()=>{var n;(n=x.value)==null||n.focus()}),(n,e)=>{var b;return o(),a("div",rt,[e[48]||(e[48]=k('<div class="search-header" data-v-1beb9803><div class="header-content" data-v-1beb9803><div class="search-info" data-v-1beb9803><div class="search-icon" data-v-1beb9803><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1beb9803><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" data-v-1beb9803></circle><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" data-v-1beb9803></path></svg></div><div class="search-details" data-v-1beb9803><h1 class="search-title" data-v-1beb9803>Legal Document Search</h1><p class="search-description" data-v-1beb9803>Search through Bangladesh legal documents and laws</p></div></div></div></div>',1)),t("div",dt,[t("div",ct,[t("div",ut,[t("div",vt,[t("div",ht,[e[8]||(e[8]=t("svg",{class:"search-input-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"m21 21-4.35-4.35",stroke:"currentColor","stroke-width":"2"})],-1)),f(t("input",{ref_key:"searchInput",ref:x,"onUpdate:modelValue":e[0]||(e[0]=s=>h.value=s),onKeydown:$,placeholder:"Search legal documents, acts, regulations...",class:"search-input",disabled:c.value},null,40,pt),[[tt,h.value]]),t("button",{onClick:B,class:"search-button",disabled:!h.value.trim()||c.value},[c.value?(o(),a("svg",kt,e[7]||(e[7]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-dasharray":"31.416","stroke-dashoffset":"31.416"},null,-1)]))):(o(),a("svg",bt,e[6]||(e[6]=[t("circle",{cx:"11",cy:"11",r:"8",stroke:"currentColor","stroke-width":"2"},null,-1),t("path",{d:"m21 21-4.35-4.35",stroke:"currentColor","stroke-width":"2"},null,-1)])))],8,mt)]),t("div",gt,[t("div",wt,[e[10]||(e[10]=t("label",{for:"topK"},"Results:",-1)),f(t("select",{id:"topK","onUpdate:modelValue":e[1]||(e[1]=s=>v.value.topK=s),class:"option-select"},e[9]||(e[9]=[t("option",{value:"5"},"5 results",-1),t("option",{value:"10"},"10 results",-1),t("option",{value:"15"},"15 results",-1),t("option",{value:"20"},"20 results",-1)]),512),[[P,v.value.topK]])]),t("div",ft,[e[12]||(e[12]=t("label",{for:"threshold"},"Relevance:",-1)),f(t("select",{id:"threshold","onUpdate:modelValue":e[2]||(e[2]=s=>v.value.threshold=s),class:"option-select"},e[11]||(e[11]=[t("option",{value:"0.5"},"Low (50%)",-1),t("option",{value:"0.6"},"Medium (60%)",-1),t("option",{value:"0.7"},"High (70%)",-1),t("option",{value:"0.8"},"Very High (80%)",-1)]),512),[[P,v.value.threshold]])])])])]),t("div",_t,[c.value?(o(),a("div",yt,e[13]||(e[13]=[t("div",{class:"loading-content"},[t("div",{class:"loading-spinner-large"}),t("p",null,"Searching legal documents...")],-1)]))):C.value&&u.value.length===0?(o(),a("div",Ct,e[14]||(e[14]=[k('<div class="no-results-content" data-v-1beb9803><svg class="no-results-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1beb9803><circle cx="11" cy="11" r="8" stroke="currentColor" stroke-width="2" data-v-1beb9803></circle><path d="m21 21-4.35-4.35" stroke="currentColor" stroke-width="2" data-v-1beb9803></path><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" data-v-1beb9803></line><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" data-v-1beb9803></line></svg><h3 data-v-1beb9803>No documents found</h3><p data-v-1beb9803>Try different keywords or adjust your search criteria</p></div>',1)]))):u.value.length>0?(o(),a("div",xt,[t("div",Bt,[e[15]||(e[15]=t("h2",null,"Search Results",-1)),t("span",Mt,l(u.value.length)+" documents found",1)]),t("div",Vt,[(o(!0),a(et,null,st(u.value,(s,w)=>{var V,D,S,L,H,A,j,I,T,K,R,z,F,E,N;return o(),a("div",{key:w,class:"result-item"},[t("div",Dt,[t("div",St,[e[16]||(e[16]=t("svg",{class:"document-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("h3",Lt,l(((V=s.metadata)==null?void 0:V.title)||"Legal Document"),1)]),t("div",Ht,[s.score?(o(),a("span",At,l(Math.round(s.score*100))+"% match ",1)):i("",!0),(D=s.metadata)!=null&&D.volume?(o(),a("span",jt," Vol. "+l(s.metadata.volume),1)):i("",!0)])]),t("div",It,[t("p",Tt,l(s.content||s.text),1),s.metadata?(o(),a("div",Kt,[s.metadata.section?(o(),a("div",Rt,[e[17]||(e[17]=t("span",{class:"metadata-label"},"Section:",-1)),t("span",zt,l(s.metadata.section),1)])):i("",!0),s.metadata.chapter?(o(),a("div",Ft,[e[18]||(e[18]=t("span",{class:"metadata-label"},"Chapter:",-1)),t("span",Et,l(s.metadata.chapter),1)])):i("",!0),s.metadata.act_name?(o(),a("div",Nt,[e[19]||(e[19]=t("span",{class:"metadata-label"},"Act:",-1)),t("span",Ut,l(s.metadata.act_name),1)])):i("",!0)])):i("",!0)]),t("div",Pt,[t("div",$t,[e[21]||(e[21]=t("h4",null,"Document Information",-1)),t("button",{onClick:U=>q(w),class:nt(["toggle-info-btn",{expanded:m.value.has(w)}])},e[20]||(e[20]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M6 9L12 15L18 9",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),10,Zt)]),f(t("div",Ot,[t("div",Qt,[((S=s.metadata)==null?void 0:S.chunk_index)!==void 0?(o(),a("div",qt,[e[22]||(e[22]=t("span",{class:"info-label"},"Chunk Index:",-1)),t("span",Gt,l(s.metadata.chunk_index),1)])):i("",!0),(L=s.metadata)!=null&&L.length?(o(),a("div",Jt,[e[23]||(e[23]=t("span",{class:"info-label"},"Length:",-1)),t("span",Wt,l(s.metadata.length),1)])):i("",!0),(H=s.metadata)!=null&&H.name?(o(),a("div",Xt,[e[24]||(e[24]=t("span",{class:"info-label"},"Name:",-1)),t("span",Yt,l(s.metadata.name),1)])):i("",!0),(A=s.metadata)!=null&&A.filename?(o(),a("div",te,[e[25]||(e[25]=t("span",{class:"info-label"},"Filename:",-1)),t("span",ee,l(s.metadata.filename),1)])):i("",!0),(j=s.metadata)!=null&&j.url?(o(),a("div",se,[e[26]||(e[26]=t("span",{class:"info-label"},"URL:",-1)),t("span",ae,[t("a",{href:s.metadata.url,target:"_blank",class:"info-link"},l(G(s.metadata.url)),9,oe)])])):i("",!0),(I=s.metadata)!=null&&I.pdf_path?(o(),a("div",ne,[e[27]||(e[27]=t("span",{class:"info-label"},"PDF Path:",-1)),t("span",le,l(s.metadata.pdf_path),1)])):i("",!0),(T=s.metadata)!=null&&T.extraction_date?(o(),a("div",ie,[e[28]||(e[28]=t("span",{class:"info-label"},"Extraction Date:",-1)),t("span",re,l(J(s.metadata.extraction_date)),1)])):i("",!0),(K=s.metadata)!=null&&K.language?(o(),a("div",de,[e[29]||(e[29]=t("span",{class:"info-label"},"Language:",-1)),t("span",ce,l(s.metadata.language),1)])):i("",!0),(R=s.metadata)!=null&&R.ocr_language?(o(),a("div",ue,[e[30]||(e[30]=t("span",{class:"info-label"},"OCR Language:",-1)),t("span",ve,l(s.metadata.ocr_language),1)])):i("",!0),(z=s.metadata)!=null&&z.total_pages?(o(),a("div",he,[e[31]||(e[31]=t("span",{class:"info-label"},"Total Pages:",-1)),t("span",pe,l(s.metadata.total_pages),1)])):i("",!0),(F=s.metadata)!=null&&F.extraction_method?(o(),a("div",me,[e[32]||(e[32]=t("span",{class:"info-label"},"Extraction Method:",-1)),t("span",be,l(s.metadata.extraction_method),1)])):i("",!0),(E=s.metadata)!=null&&E.file_size?(o(),a("div",ke,[e[33]||(e[33]=t("span",{class:"info-label"},"File Size:",-1)),t("span",ge,l(W(s.metadata.file_size)),1)])):i("",!0),(N=s.metadata)!=null&&N.page_number?(o(),a("div",we,[e[34]||(e[34]=t("span",{class:"info-label"},"Page Number:",-1)),t("span",fe,l(s.metadata.page_number),1)])):i("",!0)])],512),[[lt,m.value.has(w)]])]),t("div",_e,[t("button",{onClick:U=>M(s.content||s.text),class:"action-button",title:"Copy content"},e[35]||(e[35]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1",stroke:"currentColor","stroke-width":"2"})],-1)]),8,ye),t("button",{onClick:U=>Z(s),class:"action-button primary",title:"View details"},e[36]||(e[36]=[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z",stroke:"currentColor","stroke-width":"2"}),t("circle",{cx:"12",cy:"12",r:"3",stroke:"currentColor","stroke-width":"2"})],-1)]),8,Ce)])])}),128))])])):(o(),a("div",xe,e[37]||(e[37]=[k('<div class="default-content" data-v-1beb9803><svg class="default-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1beb9803><path d="M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1beb9803></path><polyline points="14,2 14,8 20,8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1beb9803></polyline><line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="2" data-v-1beb9803></line><line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="2" data-v-1beb9803></line><polyline points="10,9 9,9 8,9" stroke="currentColor" stroke-width="2" data-v-1beb9803></polyline></svg><h3 data-v-1beb9803>Search Legal Documents</h3><p data-v-1beb9803>Enter keywords to search through Bangladesh legal documents, acts, and regulations</p><div class="search-tips" data-v-1beb9803><h4 data-v-1beb9803>Search Tips:</h4><ul data-v-1beb9803><li data-v-1beb9803>Use specific legal terms for better results</li><li data-v-1beb9803>Try different keywords if you don&#39;t find what you&#39;re looking for</li><li data-v-1beb9803>Adjust relevance settings for broader or narrower results</li></ul></div></div>',1)])))])]),p.value?(o(),a("div",Be,[t("div",Me,[e[38]||(e[38]=t("svg",{class:"error-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),t("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"currentColor","stroke-width":"2"}),t("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"currentColor","stroke-width":"2"})],-1)),t("span",null,l(p.value),1),t("button",{onClick:e[3]||(e[3]=s=>p.value=""),class:"error-close"},"×")])])):i("",!0),r.value?(o(),a("div",{key:1,class:"modal-overlay",onClick:_},[t("div",{class:"modal-content",onClick:e[5]||(e[5]=at(()=>{},["stop"]))},[t("div",Ve,[t("h2",null,l(((b=r.value.metadata)==null?void 0:b.title)||"Legal Document"),1),t("button",{onClick:_,class:"modal-close"},"×")]),t("div",De,[r.value.metadata?(o(),a("div",Se,[r.value.metadata.act_name?(o(),a("div",Le,[e[39]||(e[39]=t("strong",null,"Act:",-1)),g(" "+l(r.value.metadata.act_name),1)])):i("",!0),r.value.metadata.volume?(o(),a("div",He,[e[40]||(e[40]=t("strong",null,"Volume:",-1)),g(" "+l(r.value.metadata.volume),1)])):i("",!0),r.value.metadata.chapter?(o(),a("div",Ae,[e[41]||(e[41]=t("strong",null,"Chapter:",-1)),g(" "+l(r.value.metadata.chapter),1)])):i("",!0),r.value.metadata.section?(o(),a("div",je,[e[42]||(e[42]=t("strong",null,"Section:",-1)),g(" "+l(r.value.metadata.section),1)])):i("",!0),r.value.score?(o(),a("div",Ie,[e[43]||(e[43]=t("strong",null,"Relevance:",-1)),g(" "+l(Math.round(r.value.score*100))+"% ",1)])):i("",!0)])):i("",!0),t("div",Te,[e[44]||(e[44]=t("h3",null,"Content:",-1)),t("p",null,l(r.value.content||r.value.text),1)])]),t("div",Ke,[t("button",{onClick:e[4]||(e[4]=s=>M(r.value.content||r.value.text)),class:"btn btn-secondary"}," Copy Content "),t("button",{onClick:_,class:"btn"},"Close")])])])):i("",!0),t("div",{class:"right-actions-sidebar"},[e[47]||(e[47]=t("div",{class:"actions-header"},[t("h4",null,"Quick Actions")],-1)),t("div",{class:"action-buttons"},[t("button",{onClick:O,class:"action-btn ai-chat-btn",title:"AI Legal Assistant"},e[45]||(e[45]=[k('<div class="action-icon" data-v-1beb9803><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1beb9803><path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1beb9803></path><circle cx="12" cy="10" r="1.5" fill="currentColor" data-v-1beb9803></circle><circle cx="8" cy="10" r="1.5" fill="currentColor" data-v-1beb9803></circle><circle cx="16" cy="10" r="1.5" fill="currentColor" data-v-1beb9803></circle></svg></div><div class="action-text" data-v-1beb9803><span class="action-title" data-v-1beb9803>AI Chat</span><span class="action-subtitle" data-v-1beb9803>Ask legal questions to AI</span></div>',2)])),t("button",{onClick:Q,class:"action-btn chat-history-btn",title:"View Chat History"},e[46]||(e[46]=[k('<div class="action-icon" data-v-1beb9803><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-1beb9803><path d="M3 12C3 7.02944 7.02944 3 12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12Z" stroke="currentColor" stroke-width="2" data-v-1beb9803></path><path d="M12 7V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-1beb9803></path></svg></div><div class="action-text" data-v-1beb9803><span class="action-title" data-v-1beb9803>Chat History</span><span class="action-subtitle" data-v-1beb9803>View past conversations</span></div>',2)]))])])])])}}},Ne=X(Re,[["__scopeId","data-v-1beb9803"]]);export{Ne as default};
