import{_ as V,f as w,D as R,c as n,m as P,o as r,b as e,s as B,g as S,t as i,n as M,F,r as z,w as H,E as I,A as J,i as T,j as K,K as U}from"./index-rvQoOiZL.js";import{D as O}from"./DocumentViewer-BBuXom4p.js";const Y={class:"modal-header"},Z={class:"modal-actions"},q={key:0,class:"modal-body loading"},Q={key:1,class:"modal-body error"},W={key:2,class:"modal-body"},X={class:"detail-section"},ee={class:"detail-grid"},te={class:"detail-item"},ae={class:"value"},le={class:"detail-item"},se={class:"value"},oe={class:"detail-item"},ie={class:"value"},ne={class:"detail-item"},re={class:"value"},de={class:"detail-section"},ce={class:"detail-grid"},ue={class:"detail-item"},ve={class:"value"},we={class:"detail-item"},ye={class:"value"},fe={class:"detail-item"},me={class:"value"},be={class:"detail-item"},pe={class:"value"},ke={class:"detail-item"},he={class:"value"},ge={class:"detail-item"},Ce={class:"detail-section"},Ne={class:"specializations-list"},Le={key:1,class:"no-specializations"},De={key:0,class:"detail-section"},$e={class:"bio-content"},Pe={class:"detail-section"},Ee={class:"certificate-section"},Ae={key:1,class:"certificate-placeholder"},_e={__name:"LawyerDetailsModal",props:{show:{type:Boolean,default:!1},lawyer:{type:Object,default:null}},emits:["close"],setup(l,{emit:E}){const y=l,C=E,m=w(!1),b=w(null),L=w(!1),u=w(null),A=c=>c?new Date(c).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"N/A",f=()=>{C("close")},D=async()=>{var c,t;if(!y.lawyer){m.value=!0,b.value=null;try{b.value="Lawyer details API not implemented yet"}catch(v){b.value=((t=(c=v.response)==null?void 0:c.data)==null?void 0:t.message)||"Failed to load lawyer details",console.error("Error loading lawyer details:",v)}finally{m.value=!1}}},h=()=>{L.value=!0},N=()=>{L.value=!1,u.value=null},_=async()=>{var c,t;if((t=(c=y.lawyer)==null?void 0:c.user)!=null&&t.email)try{const v=await I.viewCredentials(y.lawyer.user.email);u.value=v}catch(v){console.error("Error viewing certificate:",v),u.value={error:"Unable to load bar certificate. Please try again."}}},j=async()=>{var c,t;if(u.value||await _(),u.value)try{const v=new Blob([u.value],{type:"application/pdf"}),$=window.URL.createObjectURL(v),p=document.createElement("a");p.href=$,p.download=`bar-certificate-${((t=(c=y.lawyer)==null?void 0:c.user)==null?void 0:t.lastName)||"lawyer"}.pdf`,document.body.appendChild(p),p.click(),window.URL.revokeObjectURL($),document.body.removeChild(p)}catch(v){console.error("Error downloading certificate:",v),alert("Unable to download bar certificate. Please try again.")}};return R(()=>y.show,c=>{c&&y.lawyer&&D()}),R(()=>y.lawyer,c=>{c&&y.show&&D()}),(c,t)=>{var v,$,p;return l.show?(r(),n("div",{key:0,class:"modal-overlay",onClick:f},[e("div",{class:"modal-content",onClick:t[0]||(t[0]=H(()=>{},["stop"]))},[e("div",Y,[t[3]||(t[3]=e("h2",null,"Lawyer Details",-1)),e("div",Z,[c.certificateUrl?(r(),n("button",{key:0,onClick:j,class:"btn btn-outline btn-sm"},t[1]||(t[1]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"7,10 12,15 17,10",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"12",y1:"15",x2:"12",y2:"3",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),S(" Download ")]))):P("",!0),e("button",{onClick:f,class:"close-btn"},t[2]||(t[2]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[e("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("line",{x1:"6",y1:"6",x2:"18",y2:"18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]))])]),m.value?(r(),n("div",q,t[4]||(t[4]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading lawyer details...",-1)]))):b.value?(r(),n("div",Q,[e("p",null,i(b.value),1),e("button",{onClick:D,class:"retry-btn"},"Retry")])):l.lawyer?(r(),n("div",W,[e("div",X,[t[9]||(t[9]=e("h3",null,"Personal Information",-1)),e("div",ee,[e("div",te,[t[5]||(t[5]=e("span",{class:"label"},"Full Name:",-1)),e("span",ae,i(l.lawyer.user.firstName)+" "+i(l.lawyer.user.lastName),1)]),e("div",le,[t[6]||(t[6]=e("span",{class:"label"},"Email:",-1)),e("span",se,i(l.lawyer.user.email),1)]),e("div",oe,[t[7]||(t[7]=e("span",{class:"label"},"Join Date:",-1)),e("span",ie,i(A(l.lawyer.user.createdAt)),1)]),e("div",ne,[t[8]||(t[8]=e("span",{class:"label"},"Bar Certificate No:",-1)),e("span",re,i(l.lawyer.lawyer.barCertificateNumber||"N/A"),1)])])]),e("div",de,[t[16]||(t[16]=e("h3",null,"Professional Information",-1)),e("div",ce,[e("div",ue,[t[10]||(t[10]=e("span",{class:"label"},"Law Firm:",-1)),e("span",ve,i(l.lawyer.lawyer.firm||"N/A"),1)]),e("div",we,[t[11]||(t[11]=e("span",{class:"label"},"Years of Experience:",-1)),e("span",ye,i(l.lawyer.lawyer.yearsOfExperience||"N/A")+" years",1)]),e("div",fe,[t[12]||(t[12]=e("span",{class:"label"},"Practicing Court:",-1)),e("span",me,i(l.lawyer.lawyer.practicingCourtDisplayName||l.lawyer.lawyer.practicingCourt||"N/A"),1)]),e("div",be,[t[13]||(t[13]=e("span",{class:"label"},"Division:",-1)),e("span",pe,i(l.lawyer.lawyer.divisionDisplayName||l.lawyer.lawyer.division||"N/A"),1)]),e("div",ke,[t[14]||(t[14]=e("span",{class:"label"},"District:",-1)),e("span",he,i(l.lawyer.lawyer.districtDisplayName||l.lawyer.lawyer.district||"N/A"),1)]),e("div",ge,[t[15]||(t[15]=e("span",{class:"label"},"Verification Status:",-1)),e("span",{class:M(["status-badge",`status-${(v=l.lawyer.lawyer.verificationStatus)==null?void 0:v.toLowerCase()}`])},i(l.lawyer.lawyer.verificationStatusDisplayName||l.lawyer.lawyer.verificationStatus||"N/A"),3)])])]),e("div",Ce,[t[17]||(t[17]=e("h3",null,"Specializations",-1)),e("div",Ne,[l.lawyer.lawyer.specializationDisplayNames&&l.lawyer.lawyer.specializationDisplayNames.length>0?(r(!0),n(F,{key:0},z(l.lawyer.lawyer.specializationDisplayNames,x=>(r(),n("span",{key:x,class:"specialization-tag"},i(x),1))),128)):(r(),n("span",Le,"No specializations specified"))])]),l.lawyer.lawyer.bio?(r(),n("div",De,[t[18]||(t[18]=e("h3",null,"Professional Bio",-1)),e("div",$e,i(l.lawyer.lawyer.bio),1)])):P("",!0),e("div",Pe,[e("div",Ee,[l.lawyer.barCertificateFileUrl?(r(),n("button",{key:0,onClick:h,class:"certificate-link btn btn-outline btn-sm"},t[19]||(t[19]=[e("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"},[e("path",{d:"M14 2H6A2 2 0 0 0 4 4V20A2 2 0 0 0 6 22H18A2 2 0 0 0 20 20V8L14 2Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),e("polyline",{points:"14,2 14,8 20,8",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),S(" View Certificate ")]))):(r(),n("div",Ae,t[20]||(t[20]=[e("p",null,"No certificate available",-1)])))])])])):P("",!0)]),B(O,{show:L.value,title:"Bar Certificate","document-data":u.value,"document-type":"application/pdf","file-name":`bar-certificate-${((p=($=l.lawyer)==null?void 0:$.user)==null?void 0:p.lastName)||"lawyer"}`,"auto-load":!0,"show-load-button":!0,"load-button-text":"Load Certificate",onClose:N,onLoad:_,onDownload:j},null,8,["show","document-data","file-name"])])):P("",!0)}}},je=V(_e,[["__scopeId","data-v-8b789ba0"]]),xe={class:"pending-lawyer-verification"},Ue={class:"header"},Be={class:"filters"},Ie={key:0,class:"loading"},Re={key:1,class:"error"},Se={key:2,class:"empty-state"},Ve={key:3,class:"lawyers-table"},Me={class:"lawyer-name"},Fe=["onClick"],ze={key:1,class:"no-certificate"},Oe={class:"actions"},Ge=["onClick"],He=["onClick","disabled"],Je=["onClick","disabled"],Te={key:0,class:"pagination"},Ke=["disabled"],Ye={class:"page-info"},Ze=["disabled"],qe={__name:"PendingLawyerVerification",setup(l){const E=w([]),y=w(!1),C=w(null),m=w(0),b=w(0),L=w("PENDING"),u=w(null),A=w(!1),f=w(null),D=w(!1),h=w(null),N=async()=>{var d,a;y.value=!0,C.value=null;try{const s=await U.getLawyersByStatus(L.value,m.value,10);E.value=s.data.content||s.data.lawyers||[],b.value=s.data.totalPages||1}catch(s){C.value=((a=(d=s.response)==null?void 0:d.data)==null?void 0:a.message)||"Failed to load lawyers",console.error("Error loading lawyers:",s)}finally{y.value=!1}},_=d=>{m.value=d,N()},j=async d=>{var a,s;u.value=d;try{await U.approveLawyer(d),await N()}catch(k){C.value=((s=(a=k.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to approve lawyer",console.error("Error approving lawyer:",k)}finally{u.value=null}},c=async d=>{var a,s;u.value=d;try{await U.rejectLawyer(d),await N()}catch(k){C.value=((s=(a=k.response)==null?void 0:a.data)==null?void 0:s.message)||"Failed to reject lawyer",console.error("Error rejecting lawyer:",k)}finally{u.value=null}},t=d=>{f.value=d,A.value=!0},v=d=>{f.value=d,D.value=!0,h.value=null},$=()=>{A.value=!1,f.value=null},p=()=>{D.value=!1,h.value=null},x=async()=>{var d,a;if((a=(d=f.value)==null?void 0:d.user)!=null&&a.email)try{const s=await I.viewCredentials(f.value.user.email);h.value=s}catch(s){console.error("Error viewing certificate:",s),h.value={error:"Unable to load bar certificate. Please try again."}}},G=async()=>{var d,a;try{let s;h.value?s=h.value:s=await I.viewCredentials(f.value.user.email);const k=new Blob([s],{type:"application/pdf"}),o=window.URL.createObjectURL(k),g=document.createElement("a");g.href=o,g.download=`bar-certificate-${((a=(d=f.value)==null?void 0:d.user)==null?void 0:a.lastName)||"lawyer"}.pdf`,document.body.appendChild(g),g.click(),window.URL.revokeObjectURL(o),document.body.removeChild(g)}catch(s){console.error("Error downloading certificate:",s),alert("Unable to download bar certificate. Please try again.")}};return J(()=>{N()}),(d,a)=>{var s,k;return r(),n("div",xe,[e("div",Ue,[e("div",Be,[T(e("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>L.value=o),onChange:N},a[3]||(a[3]=[e("option",{value:"PENDING"},"Pending",-1),e("option",{value:"APPROVED"},"Approved",-1),e("option",{value:"REJECTED"},"Rejected",-1)]),544),[[K,L.value]])])]),y.value?(r(),n("div",Ie,a[4]||(a[4]=[e("div",{class:"spinner"},null,-1),e("p",null,"Loading lawyers...",-1)]))):C.value?(r(),n("div",Re,[e("p",null,i(C.value),1),e("button",{onClick:N,class:"retry-btn"},"Retry")])):E.value.length===0?(r(),n("div",Se,a[5]||(a[5]=[e("p",null,"No lawyers found with the selected status.",-1)]))):(r(),n("div",Ve,[e("table",null,[a[6]||(a[6]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Bar Certificate No."),e("th",null,"Bar Certificate"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(r(!0),n(F,null,z(E.value,o=>(r(),n("tr",{key:o.lawyerId},[e("td",null,[e("div",Me,[e("strong",null,i(o.user.firstName)+" "+i(o.user.lastName),1)])]),e("td",null,i(o.user.email),1),e("td",null,i(o.lawyer.barCertificateNumber||"N/A"),1),e("td",null,[o.barCertificateFileUrl?(r(),n("button",{key:0,onClick:g=>v(o),class:"certificate-link btn btn-outline btn-sm"}," View Certificate ",8,Fe)):(r(),n("span",ze,"No certificate"))]),e("td",null,[e("span",{class:M(["status-badge",`status-${o.lawyer.verificationStatus.toLowerCase()}`])},i(o.lawyer.verificationStatus),3)]),e("td",null,[e("div",Oe,[e("button",{onClick:g=>t(o),class:"btn-details"}," View Details ",8,Ge),o.lawyer.verificationStatus==="PENDING"?(r(),n("button",{key:0,onClick:g=>j(o.lawyerId),disabled:u.value===o.lawyerId,class:"btn-approve"},i(u.value===o.lawyerId?"Approving...":"Approve"),9,He)):P("",!0),o.lawyer.verificationStatus==="PENDING"?(r(),n("button",{key:1,onClick:g=>c(o.lawyerId),disabled:u.value===o.lawyerId,class:"btn-reject"},i(u.value===o.lawyerId?"Rejecting...":"Reject"),9,Je)):P("",!0)])])]))),128))])]),b.value>1?(r(),n("div",Te,[e("button",{onClick:a[1]||(a[1]=o=>_(m.value-1)),disabled:m.value===0,class:"page-btn"}," Previous ",8,Ke),e("span",Ye," Page "+i(m.value+1)+" of "+i(b.value),1),e("button",{onClick:a[2]||(a[2]=o=>_(m.value+1)),disabled:m.value>=b.value-1,class:"page-btn"}," Next ",8,Ze)])):P("",!0)])),B(je,{show:A.value,lawyer:f.value,onClose:$},null,8,["show","lawyer"]),B(O,{show:D.value,title:"Bar Certificate","document-data":h.value,"document-type":"application/pdf","file-name":`bar-certificate-${((k=(s=f.value)==null?void 0:s.user)==null?void 0:k.lastName)||"lawyer"}`,"auto-load":!0,"show-load-button":!0,"load-button-text":"Load Certificate",onClose:p,onLoad:x,onDownload:G},null,8,["show","document-data","file-name"])])}}},Xe=V(qe,[["__scopeId","data-v-085f01a5"]]);export{Xe as P};
