import{_ as p,c as r,b as t,a as y,t as d,F as v,r as u,o,u as M,V as A,f as D,l as R,m as f,n as C,z as S,g as x,s as _,y as b,E as m}from"./index-rvQoOiZL.js";const P={name:"LawyerAvailabilitySection",props:{slots:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1},error:{type:String,default:null}},computed:{ghostCards(){const a=this.slots.length%3;return a===0?0:3-a}},methods:{getDayDisplayName(a){return{SAT:"Saturday",SUN:"Sunday",MON:"Monday",TUE:"Tuesday",WED:"Wednesday",THU:"Thursday",FRI:"Friday"}[a]||a},formatTime(a){if(!a)return"";try{const[e,s]=a.split(":"),c=parseInt(e,10),l=c>=12?"PM":"AM";return`${c===0?12:c>12?c-12:c}:${s} ${l}`}catch{return a}},calculateDuration(a,e){if(!a||!e)return"";try{const s=new Date(`2000-01-01T${a}`),l=new Date(`2000-01-01T${e}`)-s;if(l<=0)return"";const n=Math.floor(l/(1e3*60*60)),i=Math.floor(l%(1e3*60*60)/(1e3*60));return n===0?`${i} min`:i===0?`${n} hr`:`${n} hr ${i} min`}catch{return""}}}},N={class:"lawyer-availability-section redesigned"},E={key:0,class:"loading-state"},B={key:1,class:"error-state"},I={key:2,class:"no-slots redesigned"},T={key:3,class:"slots-content redesigned"},$={class:"slots-grid redesigned"},V={class:"slot-header redesigned"},F={class:"slot-day"},j={class:"day-name"},z={class:"slot-time redesigned"},H={class:"time-range"},U={class:"time-value"},O={class:"duration"},Z={class:"duration-value"};function q(a,e,s,c,l,n){return o(),r("div",N,[e[6]||(e[6]=t("div",{class:"section-header"},[t("h3",null,"Availability"),t("p",{class:"section-description"},"Available consultation time slots")],-1)),s.loading?(o(),r("div",E,e[0]||(e[0]=[t("div",{class:"loading-spinner"},null,-1),t("p",null,"Loading availability slots...",-1)]))):s.error?(o(),r("div",B,[e[1]||(e[1]=y('<div class="error-icon" data-v-a953617a><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-a953617a><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-a953617a></circle><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" data-v-a953617a></line><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" data-v-a953617a></line></svg></div><h4 data-v-a953617a>Availability information unavailable</h4>',2)),t("p",null,d(s.error),1)])):!s.slots||s.slots.length===0?(o(),r("div",I,e[2]||(e[2]=[t("div",{class:"no-slots-icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2"}),t("polyline",{points:"12,6 12,12 16,14",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),t("h4",null,"No availability information",-1),t("p",null,"This lawyer hasn't set up their availability schedule yet.",-1)]))):(o(),r("div",T,[t("div",$,[(o(!0),r(v,null,u(s.slots,i=>(o(),r("div",{key:i.id,class:"slot-card redesigned"},[t("div",V,[t("div",F,[e[3]||(e[3]=t("span",{class:"day-icon"},[t("svg",{width:"20",height:"20",fill:"none",viewBox:"0 0 24 24"},[t("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",stroke:"currentColor","stroke-width":"2"}),t("path",{d:"M16 2v4M8 2v4M3 10h18",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round"})])],-1)),t("span",j,d(n.getDayDisplayName(i.day)),1)])]),t("div",z,[t("div",H,[e[4]||(e[4]=y('<span class="time-icon" data-v-a953617a><svg width="18" height="18" fill="none" viewBox="0 0 24 24" data-v-a953617a><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-a953617a></circle><path d="M12 6v6l4 2" stroke="currentColor" stroke-width="2" stroke-linecap="round" data-v-a953617a></path></svg></span><span class="time-label" data-v-a953617a>Time:</span>',2)),t("span",U,d(n.formatTime(i.startTime))+" - "+d(n.formatTime(i.endTime)),1)]),t("div",O,[e[5]||(e[5]=t("span",{class:"duration-label"},"Duration:",-1)),t("span",Z,d(n.calculateDuration(i.startTime,i.endTime)),1)])])]))),128)),(o(!0),r(v,null,u(n.ghostCards,i=>(o(),r("div",{key:"ghost-"+i,class:"slot-card ghost"}))),128))])]))])}const G=p(P,[["render",q],["__scopeId","data-v-a953617a"]]),W={name:"LawyerProfileDisplay",props:{profile:{type:Object,default:null},loading:{type:Boolean,default:!1},error:{type:String,default:null}},emits:["retry"],setup(){const a=S(),e=M(),s=A(),c=D(!1),l=R(()=>{var i;return e.isLoggedIn&&((i=e.userInfo)==null?void 0:i.id)});return{isStartingChat:c,canStartChat:l,startChat:async i=>{var g;if(!e.isLoggedIn){a.push("/login");return}if(!((g=e.userInfo)!=null&&g.id)){console.error("User information not available");return}if(!(i!=null&&i.id)){console.error("Lawyer profile information not available");return}if(e.userInfo.id===i.id){console.warn("Cannot start chat with yourself");return}c.value=!0;try{const k=`Hi ${i.firstName||"there"}, I would like to discuss my legal needs with you.`,h=await s.startConversation(i.id,k);if(h.success&&h.data){const w=h.data.conversationId;if(w)try{await a.push(`/chat/${w}`)}catch{console.warn("Chat conversation route not available, navigating to inbox");try{await a.push("/chat")}catch{console.warn("Chat inbox route not available yet"),console.log("Chat conversation started successfully. Conversation ID:",w)}}else try{await a.push("/chat")}catch{console.warn("Chat inbox route not available yet"),console.log("Chat conversation started successfully")}}else console.error("Failed to start conversation:",h.message)}catch(k){console.error("Error starting chat:",k)}finally{c.value=!1}}}},data(){return{bioExpanded:!1}},methods:{getInitial(a,e){return a&&e?`${a.charAt(0)}${e.charAt(0)}`.toUpperCase():a?a.charAt(0).toUpperCase():e?e.charAt(0).toUpperCase():"?"},getDisplayName(a,e){return a&&e?`${a} ${e}`:a||e||"Lawyer Name Not Available"},getEmail(a){return a||"Not specified"},getFirm(a){return a||"Not specified"},async handleStartChat(){await this.startChat(this.profile)}}},Y={class:"lawyer-profile-display"},J={key:0,class:"loading-state"},K={class:"profile-skeleton"},Q={class:"skeleton-details"},X={class:"skeleton-bio"},ee={class:"skeleton-tags"},te={key:1,class:"error-state"},ae={key:2,class:"profile-content"},se={class:"profile-header"},ie={class:"lawyer-avatar"},re={class:"lawyer-info"},oe={class:"lawyer-name"},ne={class:"lawyer-email"},le={class:"lawyer-firm"},de={class:"profile-actions"},ce=["disabled","aria-label"],ve={key:0,class:"chat-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true"},ue={key:1,class:"loading-spinner",viewBox:"0 0 24 24","aria-hidden":"true"},he={class:"chat-button-text"},ge={class:"profile-details-row"},fe={class:"detail-card"},ye={class:"detail-item"},we={class:"detail-value"},ke={class:"detail-item"},me={class:"detail-value"},pe={class:"detail-item"},_e={class:"detail-value"},be={class:"detail-card"},Ce={class:"detail-item"},xe={class:"detail-value"},Le={class:"detail-item"},Me={class:"detail-value"},Ae={class:"detail-item"},De={class:"detail-value"},Re={class:"detail-card"},Se={class:"specializations-container"},Pe={key:1,class:"no-specializations"},Ne={key:0,class:"detail-card full-width"},Ee={class:"bio-content"},Be={key:3,class:"empty-state"};function Ie(a,e,s,c,l,n){return o(),r("div",Y,[s.loading?(o(),r("div",J,[t("div",K,[e[3]||(e[3]=y('<div class="skeleton-header" data-v-3779b2d7><div class="skeleton-avatar" data-v-3779b2d7></div><div class="skeleton-info" data-v-3779b2d7><div class="skeleton-line skeleton-name" data-v-3779b2d7></div><div class="skeleton-line skeleton-firm" data-v-3779b2d7></div><div class="skeleton-line skeleton-status" data-v-3779b2d7></div></div></div>',1)),t("div",Q,[(o(),r(v,null,u(5,i=>t("div",{class:"skeleton-line",key:i})),64))]),t("div",X,[(o(),r(v,null,u(3,i=>t("div",{class:"skeleton-line",key:i})),64))]),t("div",ee,[(o(),r(v,null,u(4,i=>t("div",{class:"skeleton-tag",key:i})),64))])])])):s.error?(o(),r("div",te,[e[4]||(e[4]=y('<div class="error-icon" data-v-3779b2d7><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-3779b2d7><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-3779b2d7></circle><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" data-v-3779b2d7></line><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" data-v-3779b2d7></line></svg></div><h4 data-v-3779b2d7>Profile unavailable</h4>',2)),t("p",null,d(s.error),1),t("button",{onClick:e[0]||(e[0]=i=>a.$emit("retry")),class:"retry-button",type:"button"}," Try Again ")])):s.profile?(o(),r("div",ae,[t("div",se,[t("div",ie,d(n.getInitial(s.profile.firstName,s.profile.lastName)),1),t("div",re,[t("h2",oe,d(n.getDisplayName(s.profile.firstName,s.profile.lastName)),1),t("div",ne,d(n.getEmail(s.profile.email)),1),t("div",le,d(n.getFirm(s.profile.firm)),1),e[5]||(e[5]=t("div",{class:"verified-status"},[t("svg",{class:"status-icon",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M9 12L11 14L15 10M21 12C21 16.9706 16.9706 21 12 21C3 7.02944 3 12C3 16.9706 7.02944 21 12 21C16.9706 21 21 16.9706 21 12Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})]),t("span",{class:"status-text"},"Verified Lawyer")],-1))]),t("div",de,[t("button",{onClick:e[1]||(e[1]=(...i)=>n.handleStartChat&&n.handleStartChat(...i)),class:"chat-button",disabled:c.isStartingChat||!c.canStartChat,"aria-label":`Start chat with ${n.getDisplayName(s.profile.firstName,s.profile.lastName)}`,type:"button"},[c.isStartingChat?(o(),r("svg",ue,e[7]||(e[7]=[t("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"2",fill:"none",opacity:"0.3"},null,-1),t("path",{d:"M12 2a10 10 0 0 1 10 10",stroke:"currentColor","stroke-width":"2",fill:"none"},null,-1)]))):(o(),r("svg",ve,e[6]||(e[6]=[t("path",{d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))),t("span",he,d(c.isStartingChat?"Starting...":"Start Chat"),1)],8,ce)])]),t("div",ge,[t("div",fe,[e[11]||(e[11]=t("h3",null,"Professional Information",-1)),t("div",ye,[e[8]||(e[8]=t("span",{class:"detail-label"},"Years of Experience:",-1)),t("span",we,d(s.profile.yearsOfExperience||"Not specified")+" years",1)]),t("div",ke,[e[9]||(e[9]=t("span",{class:"detail-label"},"Bar Certificate:",-1)),t("span",me,d(s.profile.barCertificateNumber||"Not specified"),1)]),t("div",pe,[e[10]||(e[10]=t("span",{class:"detail-label"},"Hourly Charge (BDT):",-1)),t("span",_e,d(s.profile.hourlyCharge!=null?Number(s.profile.hourlyCharge).toLocaleString("en-BD",{style:"currency",currency:"BDT",minimumFractionDigits:2}):"Not specified"),1)])]),t("div",be,[e[15]||(e[15]=t("h3",null,"Practice Location",-1)),t("div",Ce,[e[12]||(e[12]=t("span",{class:"detail-label"},"Court:",-1)),t("span",xe,d(s.profile.practicingCourtDisplayName||"Not specified"),1)]),t("div",Le,[e[13]||(e[13]=t("span",{class:"detail-label"},"Division:",-1)),t("span",Me,d(s.profile.divisionDisplayName||"Not specified"),1)]),t("div",Ae,[e[14]||(e[14]=t("span",{class:"detail-label"},"District:",-1)),t("span",De,d(s.profile.districtDisplayName||"Not specified"),1)])]),t("div",Re,[e[16]||(e[16]=t("h3",null,"Specializations",-1)),t("div",Se,[s.profile.specializationDisplayNames&&s.profile.specializationDisplayNames.length>0?(o(!0),r(v,{key:0},u(s.profile.specializationDisplayNames,i=>(o(),r("span",{key:i,class:"specialization-tag"},d(i),1))),128)):(o(),r("span",Pe,"No specializations specified"))])])]),s.profile.bio?(o(),r("div",Ne,[e[17]||(e[17]=t("h3",null,"Professional Bio",-1)),t("div",Ee,[t("p",{class:C(["bio-text",{expanded:l.bioExpanded}])},d(s.profile.bio),3),s.profile.bio&&s.profile.bio.length>300?(o(),r("button",{key:0,onClick:e[2]||(e[2]=i=>l.bioExpanded=!l.bioExpanded),class:"bio-toggle",type:"button"},d(l.bioExpanded?"Show Less":"Show More"),1)):f("",!0)])])):f("",!0)])):(o(),r("div",Be,e[18]||(e[18]=[t("div",{class:"empty-icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M16 21V19A4 4 0 0 0 12 15H8A4 4 0 0 0 4 19V21",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}),t("circle",{cx:"12",cy:"7",r:"4",stroke:"currentColor","stroke-width":"2"})])],-1),t("h4",null,"No profile information",-1),t("p",null,"Profile information is not available for this lawyer.",-1)])))])}const Te=p(W,[["render",Ie],["__scopeId","data-v-3779b2d7"]]),$e={name:"LawyerReviewsSection",props:{reviews:{type:Array,default:()=>[]},averageRating:{type:Number,default:0},loading:{type:Boolean,default:!1},loadingMore:{type:Boolean,default:!1},error:{type:String,default:null},pagination:{type:Object,default:()=>({currentPage:0,totalPages:0,hasMore:!1})}},emits:["retry","load-page","load-more"],methods:{getClientInitial(a){return a?a.charAt(0).toUpperCase():"C"},formatDate(a){if(!a)return"";try{const e=new Date(a),c=Math.abs(new Date-e),l=Math.ceil(c/(1e3*60*60*24));if(l===1)return"Yesterday";if(l<7)return`${l} days ago`;if(l<30){const n=Math.floor(l/7);return n===1?"1 week ago":`${n} weeks ago`}else if(l<365){const n=Math.floor(l/30);return n===1?"1 month ago":`${n} months ago`}else return e.toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return console.error("Error formatting date:",e),a}}}},Ve={class:"lawyer-reviews-section"},Fe={class:"section-header"},je={key:0,class:"average-rating"},ze={class:"star-rating"},He={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Ue=["fill"],Oe={class:"rating-text"},Ze={key:0,class:"loading-state"},qe={class:"reviews-skeleton"},Ge={class:"skeleton-reviews-list"},We={class:"skeleton-review-content"},Ye={key:1,class:"error-state"},Je={key:2,class:"empty-state"},Ke={key:3,class:"reviews-content"},Qe={class:"reviews-list"},Xe={class:"review-header"},et={class:"client-info"},tt={class:"client-avatar"},at={class:"client-details"},st={class:"client-name"},it={class:"review-rating"},rt={viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ot=["fill"],nt={class:"review-date"},lt={key:0,class:"review-content"},dt={class:"review-text"},ct={key:0,class:"pagination-controls"},vt=["disabled"],ut={key:0,class:"loading-spinner small"},ht={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},gt={class:"pagination-info"},ft={class:"page-numbers"},yt=["disabled"],wt={key:0,class:"loading-spinner small"},kt={key:1,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mt={key:1,class:"load-more-section"},pt=["disabled"],_t={key:0,class:"loading-spinner small"};function bt(a,e,s,c,l,n){return o(),r("div",Ve,[t("div",Fe,[e[4]||(e[4]=t("h3",null,"Client Reviews",-1)),s.averageRating>0?(o(),r("div",je,[t("div",ze,[(o(),r(v,null,u(5,i=>t("span",{key:i,class:C(["star",{filled:i<=Math.round(Number(s.averageRating))}])},[(o(),r("svg",He,[t("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:i<=Math.round(Number(s.averageRating))?"#ffc107":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,Ue)]))],2)),64))]),t("span",Oe,d(s.averageRating.toFixed(1))+" out of 5",1)])):f("",!0)]),s.loading?(o(),r("div",Ze,[t("div",qe,[e[6]||(e[6]=t("div",{class:"skeleton-rating"},[t("div",{class:"skeleton-stars"}),t("div",{class:"skeleton-rating-text"})],-1)),t("div",Ge,[(o(),r(v,null,u(3,i=>t("div",{key:i,class:"skeleton-review"},[e[5]||(e[5]=y('<div class="skeleton-review-header" data-v-8cf13510><div class="skeleton-client-avatar" data-v-8cf13510></div><div class="skeleton-client-info" data-v-8cf13510><div class="skeleton-line skeleton-client-name" data-v-8cf13510></div><div class="skeleton-line skeleton-review-rating" data-v-8cf13510></div></div><div class="skeleton-review-date" data-v-8cf13510></div></div>',1)),t("div",We,[(o(),r(v,null,u(2,g=>t("div",{class:"skeleton-line",key:g})),64))])])),64))])])])):s.error?(o(),r("div",Ye,[e[7]||(e[7]=y('<div class="error-icon" data-v-8cf13510><svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-8cf13510><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" data-v-8cf13510></circle><line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2" data-v-8cf13510></line><line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2" data-v-8cf13510></line></svg></div><h4 data-v-8cf13510>Reviews unavailable</h4>',2)),t("p",null,d(s.error),1),t("button",{onClick:e[0]||(e[0]=i=>a.$emit("retry")),class:"retry-button",type:"button"}," Try Again ")])):!s.reviews||s.reviews.length===0?(o(),r("div",Je,e[8]||(e[8]=[t("div",{class:"empty-icon"},[t("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})])],-1),t("h4",null,"No reviews yet",-1),t("p",null,"This lawyer hasn't received any client reviews yet.",-1)]))):(o(),r("div",Ke,[t("div",Qe,[(o(!0),r(v,null,u(s.reviews,i=>(o(),r("div",{key:i.id,class:"review-card"},[t("div",Xe,[t("div",et,[t("div",tt,d(n.getClientInitial(i.clientName)),1),t("div",at,[t("h5",st,d(i.clientName),1),t("div",it,[(o(),r(v,null,u(5,g=>t("span",{key:g,class:C(["star",{filled:g<=Number(i.rating)}])},[(o(),r("svg",rt,[t("path",{d:"M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z",fill:g<=Number(i.rating)?"#ffc107":"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ot)]))],2)),64))])])]),t("div",nt,d(n.formatDate(i.createdAt)),1)]),i.review?(o(),r("div",lt,[t("p",dt,d(i.review),1)])):f("",!0)]))),128))]),s.pagination&&s.pagination.totalPages>1?(o(),r("div",ct,[t("button",{onClick:e[1]||(e[1]=i=>a.$emit("load-page",s.pagination.currentPage-1)),disabled:s.pagination.currentPage===0||s.loadingMore,class:"pagination-button",type:"button"},[s.loadingMore?(o(),r("div",ut)):(o(),r("svg",ht,e[9]||(e[9]=[t("path",{d:"M15 18L9 12L15 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]))),x(" "+d(s.loadingMore?"Loading...":"Previous"),1)],8,vt),t("div",gt,[t("span",ft," Page "+d(s.pagination.currentPage+1)+" of "+d(s.pagination.totalPages),1)]),t("button",{onClick:e[2]||(e[2]=i=>a.$emit("load-page",s.pagination.currentPage+1)),disabled:s.pagination.currentPage>=s.pagination.totalPages-1||s.loadingMore,class:"pagination-button",type:"button"},[s.loadingMore?(o(),r("div",wt)):f("",!0),t("span",null,d(s.loadingMore?"Loading...":"Next"),1),s.loadingMore?f("",!0):(o(),r("svg",kt,e[10]||(e[10]=[t("path",{d:"M9 18L15 12L9 6",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)])))],8,yt)])):f("",!0),s.pagination&&s.pagination.hasMore?(o(),r("div",mt,[t("button",{onClick:e[3]||(e[3]=i=>a.$emit("load-more")),disabled:s.loadingMore,class:"load-more-button",type:"button"},[s.loadingMore?(o(),r("div",_t)):f("",!0),t("span",null,d(s.loadingMore?"Loading...":"Load More Reviews"),1)],8,pt)])):f("",!0)]))])}const Ct=p($e,[["render",bt],["__scopeId","data-v-8cf13510"]]),xt={name:"LawyerDetailsView",components:{LawyerAvailabilitySection:G,LawyerProfileDisplay:Te,LawyerReviewsSection:Ct},props:{email:{type:String,required:!0}},data(){return{loading:{profile:!1,availability:!1,reviews:!1,reviewsMore:!1},data:{profile:null,availability:[],reviews:[],averageRating:0},errors:{profile:null,availability:null,reviews:null},pagination:{currentPage:0,totalPages:0,hasMore:!1}}},computed:{isInitialLoading(){return this.loading.profile&&!this.data.profile&&!this.errors.profile},decodedEmail(){try{return decodeURIComponent(this.email)}catch(a){return console.error("Error decoding email:",a),this.email}}},async mounted(){await this.initializeData()},methods:{async initializeData(){await Promise.all([this.fetchLawyerProfile(),this.fetchAvailabilitySlots()]),this.data.profile&&this.data.profile.id&&await this.fetchReviews(0)},async fetchLawyerProfile(){this.loading.profile=!0,this.errors.profile=null;try{const a=await m.getLawyerInfo(this.decodedEmail);if(a&&a.data)this.data.profile=a.data;else throw new Error("No profile data received")}catch(a){this.errors.profile=this.getErrorMessage(a,"Failed to load lawyer profile")}finally{this.loading.profile=!1}},async fetchAvailabilitySlots(){this.loading.availability=!0,this.errors.availability=null;try{const a=await m.getAvailabilitySlots(this.decodedEmail);if(a&&a.data){let e=[];Array.isArray(a.data)?e=a.data:a.data.slots&&Array.isArray(a.data.slots)?e=a.data.slots:a.data.data&&a.data.data.slots&&Array.isArray(a.data.data.slots)?e=a.data.data.slots:a.data.data&&Array.isArray(a.data.data)&&(e=a.data.data),this.data.availability=e}else this.data.availability=[]}catch(a){this.errors.availability=this.getErrorMessage(a,"Availability information unavailable")}finally{this.loading.availability=!1}},async fetchReviews(a=0){if(!(!this.data.profile||!this.data.profile.id)){this.loading.reviews=!0,this.errors.reviews=null;try{const e=await m.getLawyerReviews(this.data.profile.id,a,10,"DESC");e&&e.data?e.data.reviews&&Array.isArray(e.data.reviews)?(a===0?this.data.reviews=e.data.reviews:this.data.reviews=[...this.data.reviews,...e.data.reviews],this.pagination.currentPage=e.data.currentPage||a,this.pagination.totalPages=e.data.totalPages||0,this.pagination.hasMore=e.data.hasNext||!1,this.calculateAverageRating()):Array.isArray(e.data)?(this.data.reviews=a===0?e.data:[...this.data.reviews,...e.data],this.calculateAverageRating()):(this.data.reviews=[],this.data.averageRating=0):(this.data.reviews=[],this.data.averageRating=0)}catch(e){this.errors.reviews=this.getErrorMessage(e,"Reviews unavailable"),a===0&&(this.data.reviews=[],this.data.averageRating=0)}finally{this.loading.reviews=!1}}},calculateAverageRating(){if(!this.data.reviews||this.data.reviews.length===0){this.data.averageRating=0;return}const a=this.data.reviews.reduce((e,s)=>e+Number(s.rating),0);this.data.averageRating=a/this.data.reviews.length},getErrorMessage(a,e){return a.response&&a.response.data&&a.response.data.message?a.response.data.message:a.message?a.message:e},getVerificationStatusClass(a){return{"status-verified":a==="VERIFIED","status-pending":a==="PENDING","status-rejected":a==="REJECTED"}},formatDate(a){if(!a)return"";try{return new Date(a).toLocaleDateString()}catch{return a}},async handleLoadReviewsPage(a){if(!(!this.data.profile||!this.data.profile.id)){this.loading.reviewsMore=!0,this.errors.reviews=null;try{const e=await m.getLawyerReviews(this.data.profile.id,a,10,"DESC");e&&e.data?e.data.reviews&&Array.isArray(e.data.reviews)?(this.data.reviews=e.data.reviews,this.pagination.currentPage=e.data.currentPage||a,this.pagination.totalPages=e.data.totalPages||0,this.pagination.hasMore=e.data.hasNext||!1,this.calculateAverageRating()):Array.isArray(e.data)?(this.data.reviews=e.data,this.calculateAverageRating()):(this.data.reviews=[],this.data.averageRating=0):(this.data.reviews=[],this.data.averageRating=0)}catch(e){this.errors.reviews=this.getErrorMessage(e,"Failed to load reviews page")}finally{this.loading.reviewsMore=!1}}},async handleLoadMoreReviews(){if(!this.data.profile||!this.data.profile.id||!this.pagination.hasMore)return;const a=this.pagination.currentPage+1;this.loading.reviewsMore=!0,this.errors.reviews=null;try{const e=await m.getLawyerReviews(this.data.profile.id,a,10,"DESC");e&&e.data&&(e.data.reviews&&Array.isArray(e.data.reviews)?(this.data.reviews=[...this.data.reviews,...e.data.reviews],this.pagination.currentPage=e.data.currentPage||a,this.pagination.totalPages=e.data.totalPages||0,this.pagination.hasMore=e.data.hasNext||!1,this.calculateAverageRating()):Array.isArray(e.data)&&(this.data.reviews=[...this.data.reviews,...e.data],this.calculateAverageRating()))}catch(e){this.errors.reviews=this.getErrorMessage(e,"Failed to load more reviews")}finally{this.loading.reviewsMore=!1}},handleBackToSearch(){try{const a=window.history.length>1,e=document.referrer.includes("/find-lawyer")||this.$route.query.from==="search";a&&e?this.$router.go(-1):this.$router.push("/find-lawyer")}catch(a){console.warn("Error with back navigation, using fallback:",a),this.$router.push("/find-lawyer")}}}},Lt={class:"lawyer-details-view"},Mt={class:"back-navigation"},At={key:0,class:"loading-container"},Dt={class:"page-skeleton"},Rt={class:"skeleton-section"},St={class:"skeleton-details"},Pt={class:"skeleton-bio"},Nt={class:"skeleton-tags"},Et={class:"skeleton-section"},Bt={class:"skeleton-availability"},It={class:"skeleton-time-slots"},Tt={class:"skeleton-section"},$t={class:"skeleton-reviews"},Vt={class:"skeleton-review-content"},Ft={key:1,class:"content-container"};function jt(a,e,s,c,l,n){const i=b("LawyerProfileDisplay"),g=b("LawyerAvailabilitySection"),k=b("LawyerReviewsSection");return o(),r("div",Lt,[t("div",Mt,[t("button",{onClick:e[0]||(e[0]=(...h)=>n.handleBackToSearch&&n.handleBackToSearch(...h)),class:"back-button"},e[2]||(e[2]=[t("svg",{class:"back-icon",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M19 12H5M12 19l-7-7 7-7"})],-1),x(" Back to Search Results ")]))]),n.isInitialLoading?(o(),r("div",At,[t("div",Dt,[t("div",Rt,[e[3]||(e[3]=y('<div class="skeleton-header" data-v-78d2acbf><div class="skeleton-avatar" data-v-78d2acbf></div><div class="skeleton-info" data-v-78d2acbf><div class="skeleton-line skeleton-name" data-v-78d2acbf></div><div class="skeleton-line skeleton-firm" data-v-78d2acbf></div><div class="skeleton-line skeleton-status" data-v-78d2acbf></div></div></div>',1)),t("div",St,[(o(),r(v,null,u(5,h=>t("div",{class:"skeleton-line",key:h})),64))]),t("div",Pt,[(o(),r(v,null,u(3,h=>t("div",{class:"skeleton-line",key:h})),64))]),t("div",Nt,[(o(),r(v,null,u(4,h=>t("div",{class:"skeleton-tag",key:h})),64))])]),t("div",Et,[e[5]||(e[5]=t("div",{class:"skeleton-section-title"},null,-1)),t("div",Bt,[(o(),r(v,null,u(3,h=>t("div",{key:h,class:"skeleton-day-group"},[e[4]||(e[4]=t("div",{class:"skeleton-day-header"},null,-1)),t("div",It,[(o(),r(v,null,u(2,w=>t("div",{key:w,class:"skeleton-time-slot"})),64))])])),64))])]),t("div",Tt,[e[7]||(e[7]=t("div",{class:"skeleton-section-title"},null,-1)),e[8]||(e[8]=t("div",{class:"skeleton-rating"},[t("div",{class:"skeleton-stars"}),t("div",{class:"skeleton-rating-text"})],-1)),t("div",$t,[(o(),r(v,null,u(3,h=>t("div",{key:h,class:"skeleton-review"},[e[6]||(e[6]=y('<div class="skeleton-review-header" data-v-78d2acbf><div class="skeleton-client-avatar" data-v-78d2acbf></div><div class="skeleton-client-info" data-v-78d2acbf><div class="skeleton-line skeleton-client-name" data-v-78d2acbf></div><div class="skeleton-line skeleton-review-rating" data-v-78d2acbf></div></div><div class="skeleton-review-date" data-v-78d2acbf></div></div>',1)),t("div",Vt,[(o(),r(v,null,u(2,w=>t("div",{class:"skeleton-line",key:w})),64))])])),64))])])])])):(o(),r("div",Ft,[_(i,{profile:l.data.profile,loading:l.loading.profile,error:l.errors.profile,onRetry:n.fetchLawyerProfile},null,8,["profile","loading","error","onRetry"]),_(g,{slots:l.data.availability,loading:l.loading.availability,error:l.errors.availability},null,8,["slots","loading","error"]),_(k,{reviews:l.data.reviews,"average-rating":l.data.averageRating,loading:l.loading.reviews,"loading-more":l.loading.reviewsMore,error:l.errors.reviews,pagination:l.pagination,onRetry:e[1]||(e[1]=h=>n.fetchReviews(0)),onLoadPage:n.handleLoadReviewsPage,onLoadMore:n.handleLoadMoreReviews},null,8,["reviews","average-rating","loading","loading-more","error","pagination","onLoadPage","onLoadMore"])]))])}const Ut=p(xt,[["render",jt],["__scopeId","data-v-78d2acbf"]]);export{Ut as default};
